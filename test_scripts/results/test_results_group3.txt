Test Group 3: Claude Service Tests
=======================================
Started at: Wed Aug 13 22:28:00 -03 2025

[  +13 ms] executing: sysctl hw.optional.arm64
[   +9 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[  +12 ms] executing: sw_vers -productName
[  +10 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[  +13 ms] Exit code 0 from: sw_vers -productVersion
[        ] 15.5
[        ] executing: sw_vers -buildVersion
[  +11 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 24F74
[        ] executing: uname -m
[   +4 ms] Exit code 0 from: uname -m
[        ] arm64
[  +11 ms] Found 1 files which will be executed as Widget Tests.
[   +2 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +23 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +33 ms] Skipping pub get: version match.
[  +18 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +2 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +2 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[   +1 ms] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +25 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +14 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[   +1 ms] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[   +1 ms] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +13 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +13 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +11 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +9 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +11 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +17 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[   +1 ms] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[   +1 ms] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +5 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +16 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +2 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +14 ms] executing: sysctl hw.optional.arm64
[   +3 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +54 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +59 ms] No packages with native assets. Skipping native assets compilation.
[   +1 ms] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +80 ms] Manifest contained wildcard assets. Inserting missing file into build graph to force rerun. for more information see #56466.
[   +9 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/claude_service_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/claude_service_test.dart                                                                                                              [ +108 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/claude_service_test.dart
[   +3 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_compiler.ty3cIc/output.dill
[        ] Listening to compiler controller...
[   +7 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_listener.RlTSeT/listener.dart
[  +17 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +8 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +4 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_compiler.ty3cIc/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +7 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_listener.RlTSeT/listener.dart
[ +498 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_listener.RlTSeT/listener.dart took 558ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:58731
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_fonts.Orjq4w
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_listener.RlTSeT/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_fonts.Orjq4w/fonts.conf, SERVER_PORT: 58731, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 60267
[ +287 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/claude_service_test.dart                                                                                                              

🚀 Starting Claude Service Tests
00:00 +0: (setUpAll)                                                                                                                                                                                   00:00 +0: (setUpAll)                                                                                                                                                                                   

📝 Setting up test environment...
✓ Environment variables loaded
00:00 +0: ClaudeService maintains conversation history                                                                                                                                                 00:00 +0: ClaudeService maintains conversation history                                                                                                                                                 

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing conversation history maintenance...
✓ Mock API response configured
📡 Mock Claude API called
📥 First response received: First response
📊 Conversation history length: 2
✓ Test completed successfully
00:00 +1: ClaudeService maintains conversation history                                                                                                                                                 00:00 +1: ClaudeService clears conversation history                                                                                                                                                    00:00 +1: ClaudeService clears conversation history                                                                                                                                                    

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing conversation history clearing...
✓ Mock API response configured
📡 Mock Claude API called
📊 Initial history length: 2
🧹 History cleared
📊 Final history length: 0
✓ Test completed successfully
00:00 +2: ClaudeService clears conversation history                                                                                                                                                    00:00 +2: ClaudeService handles network errors gracefully                                                                                                                                              00:00 +2: ClaudeService handles network errors gracefully                                                                                                                                              

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing network error handling...
✓ Mock network error configured
📥 Error response received: Unable to get a response from Claude. Please try again later.
📊 Conversation history length: 1
✓ Test completed successfully
00:00 +3: ClaudeService handles network errors gracefully                                                                                                                                              00:00 +3: ClaudeService handles API errors gracefully                                                                                                                                                  00:00 +3: ClaudeService handles API errors gracefully                                                                                                                                                  

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing API error handling...
✓ Mock API error configured
📡 Mock API error response
📥 Error response received: Rate limit exceeded. Please try again later.
📊 Conversation history length: 1
✓ Test completed successfully
00:01 +4: ClaudeService handles API errors gracefully                                                                                                                                                  00:01 +4: ClaudeService handles malformed JSON response gracefully                                                                                                                                     00:01 +4: ClaudeService handles malformed JSON response gracefully                                                                                                                                     

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing malformed JSON handling...
✓ Mock malformed JSON configured
📡 Mock malformed JSON response
📥 Error response received: Unable to get a response from Claude. Please try again later.
✓ Test completed successfully
00:01 +5: ClaudeService handles malformed JSON response gracefully                                                                                                                                     00:01 +5: ClaudeService handles empty response gracefully                                                                                                                                              00:01 +5: ClaudeService handles empty response gracefully                                                                                                                                              

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing empty response handling...
✓ Mock empty response configured
📡 Mock empty response
📥 Error response received: Unable to get a response from Claude. Please try again later.
✓ Test completed successfully
00:01 +6: ClaudeService handles empty response gracefully                                                                                                                                              00:01 +6: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           00:01 +6: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing life plan command processing...
📤 Sending command: {"action":"get_goals_by_dimension","dimension":"SF"}
✓ Mock MCP response configured
📥 Received response: {"status":"success","data":[{"dimension":"SF","id":"G1","description":"Test Goal","trackId":"T1"}]}
🔍 Decoded response: {status: success, data: [{dimension: SF, id: G1, description: Test Goal, trackId: T1}]}
✓ Test completed successfully
00:01 +7: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           00:01 +7: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               00:01 +7: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing MCP failure fallback...
📤 Sending invalid command: {"action":"invalid_command"}
✓ Mock MCP error configured
✓ Mock Claude API response configured
📥 Received response: Missing required parameter: Exception: MCP Error
✓ Test completed successfully
00:01 +8: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               00:01 +8: Life Plan MCP Integration Life Plan MCP Integration processes normal messages without MCP                                                                                                    00:01 +8: Life Plan MCP Integration Life Plan MCP Integration processes normal messages without MCP                                                                                                    

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing normal message processing...
📤 Sending message: Hello
✓ Mock Claude API response configured
📡 Mock Claude API called
📥 Claude API response: {"content":[{"text":"Normal response"}]}
📥 Received response: Normal response
✓ Test completed successfully
00:01 +9: Life Plan MCP Integration Life Plan MCP Integration processes normal messages without MCP                                                                                                    00:01 +9: (tearDownAll)                                                                                                                                                                                [ +152 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +3 ms] test 0: flutter_tester process at pid 60267 exited with code=-9
[        ] test 0: deleting temporary directory
[   +1 ms] test 0: finished
00:01 +9: All tests passed!                                                                                                                                                                            
[   +3 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_compiler.ty3cIc...
[        ] killing pid 60261
[  +11 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.GMTlXq/flutter_test_fonts.Orjq4w...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:01.157031; combined: 0:00:01.157053.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.558696; combined: 0:00:00.558713.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.449078; combined: 0:00:00.449080.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000339; combined: 0:00:00.000340.
[   +3 ms] "flutter test" took 1,710ms.
[  +26 ms] Running 3 shutdown hooks
[   +1 ms] Shutdown hooks complete
[ +205 ms] exiting with code 0
\n-------------------------------------------\n
[  +14 ms] executing: sysctl hw.optional.arm64
[  +13 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[  +11 ms] executing: sw_vers -productName
[  +11 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +8 ms] Exit code 0 from: sw_vers -productVersion
[        ] 15.5
[        ] executing: sw_vers -buildVersion
[  +11 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 24F74
[        ] executing: uname -m
[   +4 ms] Exit code 0 from: uname -m
[        ] arm64
[  +13 ms] Found 1 files which will be executed as Widget Tests.
[   +3 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +26 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +33 ms] Skipping pub get: version match.
[  +21 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +3 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +2 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +2 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[   +1 ms] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +29 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +14 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[   +1 ms] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[   +1 ms] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[   +1 ms] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +5 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[   +1 ms] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +14 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +14 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[   +1 ms] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +12 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +6 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +12 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +11 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +10 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +6 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +10 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +3 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +18 ms] executing: sysctl hw.optional.arm64
[   +3 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +63 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +59 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +76 ms] Manifest contained wildcard assets. Inserting missing file into build graph to force rerun. for more information see #56466.
[   +6 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/claude_service_error_handling_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/claude_service_error_handling_test.dart                                                                                               [ +109 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/claude_service_error_handling_test.dart
[   +2 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_compiler.ZpaUlA/output.dill
[        ] Listening to compiler controller...
[   +4 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_listener.iwdczZ/listener.dart
[  +27 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +7 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +5 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_compiler.ZpaUlA/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +6 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_listener.iwdczZ/listener.dart
[ +477 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_listener.iwdczZ/listener.dart took 550ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:58736
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_fonts.vFx8OL
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_listener.iwdczZ/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_fonts.vFx8OL/fonts.conf, SERVER_PORT: 58736, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +4 ms] test 0: Started flutter_tester process at pid 60356
00:01 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/claude_service_error_handling_test.dart                                                                                               [ +449 ms] test 0: connected to test device, now awaiting test result
[   +4 ms] test 0: Waiting for test harness or tests to finish
00:01 +0: Claude Service Error Handling formats overloaded error message correctly                                                                                                                     00:01 +1: Claude Service Error Handling formats overloaded error message correctly                                                                                                                     00:01 +1: Claude Service Error Handling formats rate limit error message correctly                                                                                                                     00:01 +2: Claude Service Error Handling formats rate limit error message correctly                                                                                                                     00:01 +2: Claude Service Error Handling formats authentication error message correctly                                                                                                                 00:01 +3: Claude Service Error Handling formats authentication error message correctly                                                                                                                 00:01 +3: Claude Service Error Handling formats network error message correctly                                                                                                                        00:01 +4: Claude Service Error Handling formats network error message correctly                                                                                                                        00:01 +4: Claude Service Error Handling formats unknown error message correctly                                                                                                                        00:01 +5: Claude Service Error Handling formats unknown error message correctly                                                                                                                        00:01 +5: Claude Service Error Handling handles malformed error JSON gracefully                                                                                                                        00:01 +6: Claude Service Error Handling handles malformed error JSON gracefully                                                                                                                        [  +98 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +3 ms] test 0: flutter_tester process at pid 60356 exited with code=-9
[        ] test 0: deleting temporary directory
[   +1 ms] test 0: finished
00:01 +6: All tests passed!                                                                                                                                                                            
[   +3 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_compiler.ZpaUlA...
[   +1 ms] killing pid 60353
[  +11 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.BRzbkR/flutter_test_fonts.vFx8OL...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:01.259280; combined: 0:00:01.259298.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.550204; combined: 0:00:00.550220.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.561571; combined: 0:00:00.561574.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000369; combined: 0:00:00.000371.
[   +3 ms] "flutter test" took 1,822ms.
[  +27 ms] Running 3 shutdown hooks
[   +1 ms] Shutdown hooks complete
[ +184 ms] exiting with code 0
\n-------------------------------------------\n
[  +12 ms] executing: sysctl hw.optional.arm64
[   +8 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[  +10 ms] executing: sw_vers -productName
[  +10 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +9 ms] Exit code 0 from: sw_vers -productVersion
[        ] 15.5
[        ] executing: sw_vers -buildVersion
[  +14 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 24F74
[        ] executing: uname -m
[   +5 ms] Exit code 0 from: uname -m
[        ] arm64
[  +14 ms] Found 1 files which will be executed as Widget Tests.
[   +5 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +28 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +34 ms] Skipping pub get: version match.
[  +22 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +3 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +3 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +2 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +2 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[   +1 ms] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +29 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +15 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +16 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +12 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +1 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +12 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +7 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +11 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +11 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +10 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +6 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +12 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +2 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +19 ms] executing: sysctl hw.optional.arm64
[   +5 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +57 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +61 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +87 ms] Manifest contained wildcard assets. Inserting missing file into build graph to force rerun. for more information see #56466.
[   +6 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_test.dart                                                                                                     [ +108 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_test.dart
[   +2 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_compiler.z8QmCi/output.dill
[        ] Listening to compiler controller...
[   +4 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_listener.b4RXch/listener.dart
[  +23 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +8 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +5 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_compiler.z8QmCi/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +8 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_listener.b4RXch/listener.dart
[ +543 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_listener.b4RXch/listener.dart took 613ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:58749
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_fonts.OHWOtp
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_listener.b4RXch/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_fonts.OHWOtp/fonts.conf, SERVER_PORT: 58749, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +4 ms] test 0: Started flutter_tester process at pid 60450
[ +289 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_test.dart                                                                                                     

🚀 Starting Life Plan MCP Integration Tests
00:01 +0: (setUpAll)                                                                                                                                                                                   00:01 +0: (setUpAll)                                                                                                                                                                                   

📝 Setting up test environment...
✓ Environment variables loaded
00:01 +0: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           00:01 +0: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           

🔄 Setting up test case...
✓ Mock client and MCP service initialized
✓ Claude service created with mock dependencies

🧪 Testing life plan command processing...
📤 Sending command: {"action":"get_goals_by_dimension","dimension":"SF"}
✓ Mock MCP response configured
Oracle prompt not found or failed to load: Unable to load asset: "assets/config/oracle/oracle_prompt_1.0.md".
The asset does not exist or has empty data.
External prompt not found, falling back to persona config: Unable to load asset: "assets/prompts/ari_life_coach_system.txt".
The asset does not exist or has empty data.
📡 Mock MCP processing command
📥 MCP response: {"status":"success","data":[{"dimension":"SF","id":"G1","description":"Test Goal","trackId":"T1"}]}
📥 Service response received: {"status":"success","data":[{"dimension":"SF","id":"G1","description":"Test Goal","trackId":"T1"}]}
🔍 Decoded response: {status: success, data: [{dimension: SF, id: G1, description: Test Goal, trackId: T1}]}
✓ Test completed successfully
00:01 +1: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           00:01 +1: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               00:01 +1: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               

🔄 Setting up test case...
✓ Mock client and MCP service initialized
✓ Claude service created with mock dependencies

🧪 Testing MCP failure fallback...
📤 Sending invalid command: {"action":"invalid_command"}
✓ Mock MCP error configured
✓ Mock Claude API response configured
Oracle prompt not found or failed to load: Unable to load asset: "assets/config/oracle/oracle_prompt_1.0.md".
The asset does not exist or has empty data.
External prompt not found, falling back to persona config: Unable to load asset: "assets/prompts/ari_life_coach_system.txt".
The asset does not exist or has empty data.
📡 Mock MCP throwing error
📥 Service response received: Missing required parameter: Exception: MCP Error
✓ Test completed successfully
00:01 +2: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               00:01 +2: Life Plan MCP Integration processes normal messages without MCP                                                                                                                              00:01 +2: Life Plan MCP Integration processes normal messages without MCP                                                                                                                              

🔄 Setting up test case...
✓ Mock client and MCP service initialized
✓ Claude service created with mock dependencies

🧪 Testing normal message processing...
📤 Sending message: Hello
✓ Mock Claude API response configured
Oracle prompt not found or failed to load: Unable to load asset: "assets/config/oracle/oracle_prompt_1.0.md".
The asset does not exist or has empty data.
External prompt not found, falling back to persona config: Unable to load asset: "assets/prompts/ari_life_coach_system.txt".
The asset does not exist or has empty data.
📡 Mock Claude API called
📥 Claude API response: {"content":[{"text":"Normal response"}]}
📥 Service response received: Normal response
✓ Test completed successfully
00:01 +3: Life Plan MCP Integration processes normal messages without MCP                                                                                                                              00:01 +3: (tearDownAll)                                                                                                                                                                                [ +144 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +2 ms] test 0: flutter_tester process at pid 60450 exited with code=-9
[        ] test 0: deleting temporary directory
[   +1 ms] test 0: finished
00:01 +3: All tests passed!                                                                                                                                                                            
[   +3 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_compiler.z8QmCi...
[        ] killing pid 60444
[  +12 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.btMU65/flutter_test_fonts.OHWOtp...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:01.202908; combined: 0:00:01.202926.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.614280; combined: 0:00:00.614301.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.443132; combined: 0:00:00.443134.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000351; combined: 0:00:00.000352.
[   +3 ms] "flutter test" took 1,789ms.
[  +26 ms] Running 3 shutdown hooks
[   +1 ms] Shutdown hooks complete
[ +216 ms] exiting with code 0
\n-------------------------------------------\n
[  +14 ms] executing: sysctl hw.optional.arm64
[   +8 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[  +10 ms] executing: sw_vers -productName
[  +11 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +9 ms] Exit code 0 from: sw_vers -productVersion
[        ] 15.5
[        ] executing: sw_vers -buildVersion
[  +13 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 24F74
[        ] executing: uname -m
[   +5 ms] Exit code 0 from: uname -m
[        ] arm64
[  +14 ms] Found 1 files which will be executed as Widget Tests.
[   +3 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +27 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +31 ms] Skipping pub get: version match.
[  +20 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +3 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[   +1 ms] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +26 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +13 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +13 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +11 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +11 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +9 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +10 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +10 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[   +1 ms] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +11 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +2 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +16 ms] executing: sysctl hw.optional.arm64
[   +4 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +53 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +54 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +88 ms] Manifest contained wildcard assets. Inserting missing file into build graph to force rerun. for more information see #56466.
[   +7 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_error_handling_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_error_handling_test.dart                                                                                      [ +101 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_error_handling_test.dart
[   +2 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_compiler.uxLLn8/output.dill
[        ] Listening to compiler controller...
[   +3 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_listener.vG0ZGp/listener.dart
[  +18 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +3 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +8 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +5 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_compiler.uxLLn8/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +7 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_listener.vG0ZGp/listener.dart
[ +505 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_listener.vG0ZGp/listener.dart took 570ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:58758
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_fonts.4CWN4s
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_listener.vG0ZGp/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_fonts.4CWN4s/fonts.conf, SERVER_PORT: 58758, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +4 ms] test 0: Started flutter_tester process at pid 60541
[ +290 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_error_handling_test.dart                                                                                      

🚀 Starting Claude Service Error Handling Tests
00:00 +0: (setUpAll)                                                                                                                                                                                   00:00 +0: (setUpAll)                                                                                                                                                                                   

📝 Setting up test environment...
✓ Environment variables loaded
00:00 +0: Claude Service Error Handling handles overloaded_error gracefully                                                                                                                            00:00 +0: Claude Service Error Handling handles overloaded_error gracefully                                                                                                                            

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing overloaded_error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: {"type":"error","error":{"type":"overloaded_error","message":"Overloaded"}}
📥 Service response received: Rate limit exceeded. Please try again later.
✓ Test completed successfully
00:00 +1: Claude Service Error Handling handles overloaded_error gracefully                                                                                                                            00:00 +1: Claude Service Error Handling handles rate_limit_error gracefully                                                                                                                            00:00 +1: Claude Service Error Handling handles rate_limit_error gracefully                                                                                                                            

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing rate_limit_error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: {"type":"error","error":{"type":"rate_limit_error","message":"Rate limit exceeded"}}
📥 Service response received: Rate limit exceeded. Please try again later.
✓ Test completed successfully
00:00 +2: Claude Service Error Handling handles rate_limit_error gracefully                                                                                                                            00:00 +2: Claude Service Error Handling handles authentication_error gracefully                                                                                                                        00:00 +2: Claude Service Error Handling handles authentication_error gracefully                                                                                                                        

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing authentication_error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: {"type":"error","error":{"type":"authentication_error","message":"Invalid API key"}}
📥 Service response received: Authentication failed. Please check your API key.
✓ Test completed successfully
00:00 +3: Claude Service Error Handling handles authentication_error gracefully                                                                                                                        00:00 +3: Claude Service Error Handling handles network errors gracefully                                                                                                                              00:00 +3: Claude Service Error Handling handles network errors gracefully                                                                                                                              

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing network error handling...
📤 Sending message: Hello
✓ Mock network error configured
📥 Service response received: Unable to connect to Claude. Please check your internet connection.
✓ Test completed successfully
00:00 +4: Claude Service Error Handling handles network errors gracefully                                                                                                                              00:00 +4: Claude Service Error Handling handles server errors gracefully                                                                                                                               00:00 +4: Claude Service Error Handling handles server errors gracefully                                                                                                                               

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing server error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: Internal Server Error
📥 Service response received: Claude service is temporarily unavailable. Please try again later.
✓ Test completed successfully
00:01 +5: Claude Service Error Handling handles server errors gracefully                                                                                                                               00:01 +5: Claude Service Error Handling handles unknown errors gracefully                                                                                                                              00:01 +5: Claude Service Error Handling handles unknown errors gracefully                                                                                                                              

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing unknown error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: {"type":"error","error":{"type":"unknown_error","message":"Something went wrong"}}
📥 Service response received: Claude error: Something went wrong
✓ Test completed successfully
00:01 +6: Claude Service Error Handling handles unknown errors gracefully                                                                                                                              00:01 +6: (tearDownAll)                                                                                                                                                                                [ +125 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +2 ms] test 0: flutter_tester process at pid 60541 exited with code=-9
[        ] test 0: deleting temporary directory
[   +1 ms] test 0: finished
00:01 +6: All tests passed!                                                                                                                                                                            
[   +3 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_compiler.uxLLn8...
[   +1 ms] killing pid 60538
[  +11 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.LZt6L6/flutter_test_fonts.4CWN4s...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:01.132558; combined: 0:00:01.132583.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.571103; combined: 0:00:00.571118.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.424119; combined: 0:00:00.424122.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000330; combined: 0:00:00.000336.
[   +3 ms] "flutter test" took 1,671ms.
[  +25 ms] Running 3 shutdown hooks
[   +1 ms] Shutdown hooks complete
[ +193 ms] exiting with code 0
\n-------------------------------------------\n
[  +14 ms] executing: sysctl hw.optional.arm64
[   +9 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[  +10 ms] executing: sw_vers -productName
[  +11 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +9 ms] Exit code 0 from: sw_vers -productVersion
[        ] 15.5
[        ] executing: sw_vers -buildVersion
[   +9 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 24F74
[        ] executing: uname -m
[   +4 ms] Exit code 0 from: uname -m
[        ] arm64
[  +13 ms] Found 1 files which will be executed as Widget Tests.
[   +4 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +1 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +25 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +29 ms] Skipping pub get: version match.
[  +19 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +2 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +2 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[   +1 ms] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +27 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +13 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[   +1 ms] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +13 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +11 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +11 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +9 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +10 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +10 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +2 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +16 ms] executing: sysctl hw.optional.arm64
[   +3 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +53 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +55 ms] No packages with native assets. Skipping native assets compilation.
[   +1 ms] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +83 ms] Manifest contained wildcard assets. Inserting missing file into build graph to force rerun. for more information see #56466.
[   +6 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_integration_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_integration_test.dart                                                                                         [ +109 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_integration_test.dart
[   +2 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_compiler.RREFZV/output.dill
[        ] Listening to compiler controller...
[   +3 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_listener.KQ86a7/listener.dart
[  +21 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +8 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +4 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_compiler.RREFZV/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +8 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_listener.KQ86a7/listener.dart
[ +472 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_listener.KQ86a7/listener.dart took 536ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:58763
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_fonts.aEX2aO
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_listener.KQ86a7/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_fonts.aEX2aO/fonts.conf, SERVER_PORT: 58763, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +4 ms] test 0: Started flutter_tester process at pid 60630
[ +278 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_integration_test.dart                                                                                         

🚀 Starting Claude Service Integration Tests
00:00 +0: (setUpAll)                                                                                                                                                                                   00:00 +0: (setUpAll)                                                                                                                                                                                   

📝 Setting up test environment...
✓ Environment variables loaded
✓ Life Plan Service initialized
✓ MCP Service initialized
00:00 +0: Claude Service Life Plan Integration successfully retrieves goals by dimension                                                                                                               00:00 +0: Claude Service Life Plan Integration successfully retrieves goals by dimension                                                                                                               

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing goals retrieval by dimension...
📤 Sending command: {"action":"get_goals_by_dimension","dimension":"SF"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"success","data":[{"dimension":"SF","id":"OPP1","description":"Perder peso","trackId":"ME1\r"},{"dimension":"SF","id":"OPP2","description":"Perder peso avançado","trackId":"ME2\r"},{"dimension":"SF","id":"OGM1","description":"Ganhar massa","trackId":"GM1\r"},{"dimension":"SF","id":"OGM2","description":"Ganhar massa avançado","trackId":"GM2\r"},{"dimension":"SF","id":"ODM1","description":"Dormir melhor","trackId":"DM1\r"},{"dimension":"SF","id":"ODM2","description":"Dormir melhor : avançado","trackId":"DM2\r"},{"dimension":"SF","id":"OMMA1","description":"Melhorar minha alimentação","trackId":"ES1\r"},{"dimension":"SF","id":"OMMA2","description":"Melhorar minha alimentação : avançado","trackId":"ES2"}]}
🔍 Decoded response: {status: success, data: [{dimension: SF, id: OPP1, description: Perder peso, trackId: ME1}, {dimension: SF, id: OPP2, description: Perder peso avançado, trackId: ME2}, {dimension: SF, id: OGM1, description: Ganhar massa, trackId: GM1}, {dimension: SF, id: OGM2, description: Ganhar massa avançado, trackId: GM2}, {dimension: SF, id: ODM1, description: Dormir melhor, trackId: DM1}, {dimension: SF, id: ODM2, description: Dormir melhor : avançado, trackId: DM2}, {dimension: SF, id: OMMA1, description: Melhorar minha alimentação, trackId: ES1}, {dimension: SF, id: OMMA2, description: Melhorar minha alimentação : avançado, trackId: ES2}]}
📋 First goal data: {dimension: SF, id: OPP1, description: Perder peso, trackId: ME1}
00:00 +1: Claude Service Life Plan Integration successfully retrieves goals by dimension                                                                                                               00:00 +1: Claude Service Life Plan Integration successfully retrieves track information                                                                                                                00:00 +1: Claude Service Life Plan Integration successfully retrieves track information                                                                                                                

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing track information retrieval...
📤 Sending goals command: {"action":"get_goals_by_dimension","dimension":"SF"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received goals response: {"status":"success","data":[{"dimension":"SF","id":"OPP1","description":"Perder peso","trackId":"ME1\r"},{"dimension":"SF","id":"OPP2","description":"Perder peso avançado","trackId":"ME2\r"},{"dimension":"SF","id":"OGM1","description":"Ganhar massa","trackId":"GM1\r"},{"dimension":"SF","id":"OGM2","description":"Ganhar massa avançado","trackId":"GM2\r"},{"dimension":"SF","id":"ODM1","description":"Dormir melhor","trackId":"DM1\r"},{"dimension":"SF","id":"ODM2","description":"Dormir melhor : avançado","trackId":"DM2\r"},{"dimension":"SF","id":"OMMA1","description":"Melhorar minha alimentação","trackId":"ES1\r"},{"dimension":"SF","id":"OMMA2","description":"Melhorar minha alimentação : avançado","trackId":"ES2"}]}
🔍 Decoded goals data: {status: success, data: [{dimension: SF, id: OPP1, description: Perder peso, trackId: ME1}, {dimension: SF, id: OPP2, description: Perder peso avançado, trackId: ME2}, {dimension: SF, id: OGM1, description: Ganhar massa, trackId: GM1}, {dimension: SF, id: OGM2, description: Ganhar massa avançado, trackId: GM2}, {dimension: SF, id: ODM1, description: Dormir melhor, trackId: DM1}, {dimension: SF, id: ODM2, description: Dormir melhor : avançado, trackId: DM2}, {dimension: SF, id: OMMA1, description: Melhorar minha alimentação, trackId: ES1}, {dimension: SF, id: OMMA2, description: Melhorar minha alimentação : avançado, trackId: ES2}]}
🎯 Found trackId: ME1
📤 Sending track command: {"action":"get_track_by_id","trackId":"ME1\r"}
📥 Received track response: {"status":"success","data":{"dimension":"SF","code":"ME1","name":"Mapa do emagrescimento","challenges":[{"code":"ME1BE","name":"Base do Emagrecimento","level":1,"habits":[{"habitId":"SF7","frequency":7},{"habitId":"SF1","frequency":7}]},{"code":"ME1EC","name":"Emagrecimento consciente","level":2,"habits":[{"habitId":"SF16","frequency":5},{"habitId":"SF1","frequency":7},{"habitId":"SF1813","frequency":2}]}]}}
�� Decoded track data: {status: success, data: {dimension: SF, code: ME1, name: Mapa do emagrescimento, challenges: [{code: ME1BE, name: Base do Emagrecimento, level: 1, habits: [{habitId: SF7, frequency: 7}, {habitId: SF1, frequency: 7}]}, {code: ME1EC, name: Emagrecimento consciente, level: 2, habits: [{habitId: SF16, frequency: 5}, {habitId: SF1, frequency: 7}, {habitId: SF1813, frequency: 2}]}]}}
00:00 +2: Claude Service Life Plan Integration successfully retrieves track information                                                                                                                00:00 +2: Claude Service Life Plan Integration successfully retrieves habits for a challenge                                                                                                           00:00 +2: Claude Service Life Plan Integration successfully retrieves habits for a challenge                                                                                                           

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing habits retrieval for challenge...
📤 Sending command: {"action":"get_habits_for_challenge","trackId":"ME1","challengeCode":"ME1PC"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"success","data":[]}
🔍 Decoded response: {status: success, data: []}
⚠️ No habits found for challenge ME1PC
00:00 +3: Claude Service Life Plan Integration successfully retrieves habits for a challenge                                                                                                           00:00 +3: Claude Service Life Plan Integration successfully retrieves recommended habits                                                                                                               00:00 +3: Claude Service Life Plan Integration successfully retrieves recommended habits                                                                                                               

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing recommended habits retrieval...
📤 Sending command: {"action":"get_recommended_habits","dimension":"SF","minImpact":3}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"success","data":[{"id":"E6","description":"Agradecer 3 coisas do meu dia ","intensity":"","duration":"","impact":{"relationships":3,"work":3,"physical":3,"spiritual":5,"mental":5}},{"id":"SF5","description":"Dormir de 7 a 9 horas ","intensity":"","duration":"","impact":{"relationships":0,"work":1,"physical":5,"spiritual":0,"mental":3}},{"id":"SF6","description":"Evitar o consumo de cafeína após as 15:00","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":2}},{"id":"SF8","description":"Comer fruta ","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":1}},{"id":"SF9","description":"Comer fonte de carboidrato complexo ","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":1}},{"id":"SF10","description":"Comer proteína nas refeições (ingestão adequade de proteína) ","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":1}},{"id":"SF11","description":"Comer legumes e salada","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":1}},{"id":"SF1213","description":"Fazer exercício de força ","intensity":"Leve","duration":"Mais de 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1222","description":"Fazer exercício de força ","intensity":"Moderada","duration":"De 21 a 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1223","description":"Fazer exercício de força ","intensity":"Moderada","duration":"Mais de 40 min","impact":{"relationships":0,"work":3,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1231","description":"Fazer exercício de força ","intensity":"Intensa","duration":"Até 20 min","impact":{"relationships":0,"work":1,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1232","description":"Fazer exercício de força ","intensity":"Intensa","duration":"De 21 a 40 min","impact":{"relationships":0,"work":3,"physical":4,"spiritual":0,"mental":4}},{"id":"SF1233","description":"Fazer exercício de força ","intensity":"Intensa","duration":"Mais de 40 min","impact":{"relationships":0,"work":5,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1313","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Leve","duration":"Mais de 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1322","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Moderada","duration":"De 21 a 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1323","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Moderada","duration":"Mais de 40 min","impact":{"relationships":0,"work":3,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1331","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Intensa","duration":"Até 20 min","impact":{"relationships":0,"work":1,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1332","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Intensa","duration":"De 21 a 40 min","impact":{"relationships":0,"work":3,"physical":4,"spiritual":0,"mental":4}},{"id":"SF1333","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Intensa","duration":"Mais de 40 min","impact":{"relationships":0,"work":5,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1413","description":"Correr","intensity":"Leve","duration":"Mais de 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1422","description":"Correr","intensity":"Moderada","duration":"De 21 a 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1423","description":"Correr","intensity":"Moderada","duration":"Mais de 40 min","impact":{"relationships":0,"work":3,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1431","description":"Correr","intensity":"Intensa","duration":"Até 20 min","impact":{"relationships":0,"work":1,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1432","description":"Correr","intensity":"Intensa","duration":"De 21 a 40 min","impact":{"relationships":0,"work":3,"physical":4,"spiritual":0,"mental":4}},{"id":"SF1433","description":"Correr","intensity":"Intensa","duration":"Mais de 40 min","impact":{"relationships":0,"work":5,"physical":5,"spiritual":0,"mental":5}},{"id":"SF15","description":"Alongar","intensity":"","duration":"Mais de 40 min ","impact":{"relationships":0,"work":0,"physical":5,"spiritual":0,"mental":3}},{"id":"SF16","description":"Dormir sempre no mesmo horário (consistência no horário de dormir e acordar)","intensity":"","duration":"","impact":{"relationships":0,"work":1,"physical":5,"spiritual":0,"mental":3}},{"id":"SF17","description":"Restringir comida industrializada/processada","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":5,"spiritual":0,"mental":3}},{"id":"SF1813","description":"Caminhar ","intensity":"Leve","duration":"Mais de 20 min ","impact":{"relationships":0,"work":2,"physical":3,"spiritual":1,"mental":3}},{"id":"SF1822","description":"Caminhar ","intensity":"Moderado","duration":"De 11 a 20 min ","impact":{"relationships":0,"work":2,"physical":3,"spiritual":1,"mental":3}},{"id":"SF1822","description":"Caminhar ","intensity":"Moderado","duration":"Mais de 20 min ","impact":{"relationships":0,"work":3,"physical":5,"spiritual":1,"mental":5}},{"id":"SM1","description":"Me expor à luz natural ","intensity":"","duration":"Mais de 20 min ","impact":{"relationships":0,"work":2,"physical":4,"spiritual":0,"mental":5}},{"id":"SM813","description":"Caminhar ao ar livre","intensity":"Leve","duration":"Mais de 20 min ","impact":{"relationships":0,"work":2,"physical":3,"spiritual":1,"mental":3}},{"id":"SM822","description":"Caminhar ao ar livre","intensity":"Moderado","duration":"De 11 a 20 min ","impact":{"relationships":0,"work":2,"physical":3,"spiritual":1,"mental":3}},{"id":"SM823","description":"Caminhar ao ar livre","intensity":"Moderado","duration":"Mais de 20 min ","impact":{"relationships":0,"work":3,"physical":5,"spiritual":1,"mental":5}}]}
🔍 Decoded response: {status: success, data: [{id: E6, description: Agradecer 3 coisas do meu dia , intensity: , duration: , impact: {relationships: 3, work: 3, physical: 3, spiritual: 5, mental: 5}}, {id: SF5, description: Dormir de 7 a 9 horas , intensity: , duration: , impact: {relationships: 0, work: 1, physical: 5, spiritual: 0, mental: 3}}, {id: SF6, description: Evitar o consumo de cafeína após as 15:00, intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 2}}, {id: SF8, description: Comer fruta , intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 1}}, {id: SF9, description: Comer fonte de carboidrato complexo , intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 1}}, {id: SF10, description: Comer proteína nas refeições (ingestão adequade de proteína) , intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 1}}, {id: SF11, description: Comer legumes e salada, intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 1}}, {id: SF1213, description: Fazer exercício de força , intensity: Leve, duration: Mais de 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1222, description: Fazer exercício de força , intensity: Moderada, duration: De 21 a 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1223, description: Fazer exercício de força , intensity: Moderada, duration: Mais de 40 min, impact: {relationships: 0, work: 3, physical: 5, spiritual: 0, mental: 5}}, {id: SF1231, description: Fazer exercício de força , intensity: Intensa, duration: Até 20 min, impact: {relationships: 0, work: 1, physical: 3, spiritual: 0, mental: 3}}, {id: SF1232, description: Fazer exercício de força , intensity: Intensa, duration: De 21 a 40 min, impact: {relationships: 0, work: 3, physical: 4, spiritual: 0, mental: 4}}, {id: SF1233, description: Fazer exercício de força , intensity: Intensa, duration: Mais de 40 min, impact: {relationships: 0, work: 5, physical: 5, spiritual: 0, mental: 5}}, {id: SF1313, description: Fazer exercício de cardio/aeróbico  , intensity: Leve, duration: Mais de 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1322, description: Fazer exercício de cardio/aeróbico  , intensity: Moderada, duration: De 21 a 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1323, description: Fazer exercício de cardio/aeróbico  , intensity: Moderada, duration: Mais de 40 min, impact: {relationships: 0, work: 3, physical: 5, spiritual: 0, mental: 5}}, {id: SF1331, description: Fazer exercício de cardio/aeróbico  , intensity: Intensa, duration: Até 20 min, impact: {relationships: 0, work: 1, physical: 3, spiritual: 0, mental: 3}}, {id: SF1332, description: Fazer exercício de cardio/aeróbico  , intensity: Intensa, duration: De 21 a 40 min, impact: {relationships: 0, work: 3, physical: 4, spiritual: 0, mental: 4}}, {id: SF1333, description: Fazer exercício de cardio/aeróbico  , intensity: Intensa, duration: Mais de 40 min, impact: {relationships: 0, work: 5, physical: 5, spiritual: 0, mental: 5}}, {id: SF1413, description: Correr, intensity: Leve, duration: Mais de 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1422, description: Correr, intensity: Moderada, duration: De 21 a 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1423, description: Correr, intensity: Moderada, duration: Mais de 40 min, impact: {relationships: 0, work: 3, physical: 5, spiritual: 0, mental: 5}}, {id: SF1431, description: Correr, intensity: Intensa, duration: Até 20 min, impact: {relationships: 0, work: 1, physical: 3, spiritual: 0, mental: 3}}, {id: SF1432, description: Correr, intensity: Intensa, duration: De 21 a 40 min, impact: {relationships: 0, work: 3, physical: 4, spiritual: 0, mental: 4}}, {id: SF1433, description: Correr, intensity: Intensa, duration: Mais de 40 min, impact: {relationships: 0, work: 5, physical: 5, spiritual: 0, mental: 5}}, {id: SF15, description: Alongar, intensity: , duration: Mais de 40 min , impact: {relationships: 0, work: 0, physical: 5, spiritual: 0, mental: 3}}, {id: SF16, description: Dormir sempre no mesmo horário (consistência no horário de dormir e acordar), intensity: , duration: , impact: {relationships: 0, work: 1, physical: 5, spiritual: 0, mental: 3}}, {id: SF17, description: Restringir comida industrializada/processada, intensity: , duration: , impact: {relationships: 0, work: 0, physical: 5, spiritual: 0, mental: 3}}, {id: SF1813, description: Caminhar , intensity: Leve, duration: Mais de 20 min , impact: {relationships: 0, work: 2, physical: 3, spiritual: 1, mental: 3}}, {id: SF1822, description: Caminhar , intensity: Moderado, duration: De 11 a 20 min , impact: {relationships: 0, work: 2, physical: 3, spiritual: 1, mental: 3}}, {id: SF1822, description: Caminhar , intensity: Moderado, duration: Mais de 20 min , impact: {relationships: 0, work: 3, physical: 5, spiritual: 1, mental: 5}}, {id: SM1, description: Me expor à luz natural , intensity: , duration: Mais de 20 min , impact: {relationships: 0, work: 2, physical: 4, spiritual: 0, mental: 5}}, {id: SM813, description: Caminhar ao ar livre, intensity: Leve, duration: Mais de 20 min , impact: {relationships: 0, work: 2, physical: 3, spiritual: 1, mental: 3}}, {id: SM822, description: Caminhar ao ar livre, intensity: Moderado, duration: De 11 a 20 min , impact: {relationships: 0, work: 2, physical: 3, spiritual: 1, mental: 3}}, {id: SM823, description: Caminhar ao ar livre, intensity: Moderado, duration: Mais de 20 min , impact: {relationships: 0, work: 3, physical: 5, spiritual: 1, mental: 5}}]}
📋 First recommended habit: {id: E6, description: Agradecer 3 coisas do meu dia , intensity: , duration: , impact: {relationships: 3, work: 3, physical: 3, spiritual: 5, mental: 5}}
💪 Physical impact: 3
00:00 +4: Claude Service Life Plan Integration successfully retrieves recommended habits                                                                                                               00:00 +4: Claude Service Life Plan Integration handles invalid commands gracefully                                                                                                                     00:00 +4: Claude Service Life Plan Integration handles invalid commands gracefully                                                                                                                     

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing invalid command handling...
📤 Sending invalid command: {"action":"invalid_action","data":"test"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"error","message":"Unknown action: invalid_action"}
🔍 Decoded error response: {status: error, message: Unknown action: invalid_action}
00:00 +5: Claude Service Life Plan Integration handles invalid commands gracefully                                                                                                                     00:00 +5: Claude Service Life Plan Integration handles missing required parameters gracefully                                                                                                          00:00 +5: Claude Service Life Plan Integration handles missing required parameters gracefully                                                                                                          

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing missing parameter handling...
📤 Sending command with missing parameter: {"action":"get_goals_by_dimension"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"error","message":"Exception: Missing required parameter: dimension"}
🔍 Decoded error response: {status: error, message: Exception: Missing required parameter: dimension}
00:00 +6: Claude Service Life Plan Integration handles missing required parameters gracefully                                                                                                          00:00 +6: (tearDownAll)                                                                                                                                                                                [ +147 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +2 ms] test 0: flutter_tester process at pid 60630 exited with code=-9
[        ] test 0: deleting temporary directory
[   +1 ms] test 0: finished
00:00 +6: All tests passed!                                                                                                                                                                            
[   +3 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_compiler.RREFZV...
[        ] killing pid 60627
[   +7 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.q2WDPx/flutter_test_fonts.aEX2aO...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:01.111909; combined: 0:00:01.111929.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.537058; combined: 0:00:00.537074.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.434559; combined: 0:00:00.434561.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000360; combined: 0:00:00.000362.
[   +3 ms] "flutter test" took 1,635ms.
[  +25 ms] Running 3 shutdown hooks
[        ] Shutdown hooks complete
[ +237 ms] exiting with code 0
\n-------------------------------------------\n
[  +13 ms] executing: sysctl hw.optional.arm64
[   +7 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[  +10 ms] executing: sw_vers -productName
[  +10 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +8 ms] Exit code 0 from: sw_vers -productVersion
[        ] 15.5
[        ] executing: sw_vers -buildVersion
[  +14 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 24F74
[        ] executing: uname -m
[   +5 ms] Exit code 0 from: uname -m
[        ] arm64
[  +14 ms] Found 1 files which will be executed as Widget Tests.
[   +3 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +24 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +29 ms] Skipping pub get: version match.
[  +19 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +2 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +2 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[   +1 ms] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +26 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +12 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[   +1 ms] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[   +1 ms] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[   +1 ms] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +13 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +11 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +11 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +9 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +10 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[   +1 ms] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +10 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +2 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +17 ms] executing: sysctl hw.optional.arm64
[   +4 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +61 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +70 ms] No packages with native assets. Skipping native assets compilation.
[   +1 ms] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +97 ms] Manifest contained wildcard assets. Inserting missing file into build graph to force rerun. for more information see #56466.
[   +6 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/chat_screen_error_handling_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/chat_screen_error_handling_test.dart                                                                                                  [  +92 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/chat_screen_error_handling_test.dart
[   +2 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_compiler.6xEqHX/output.dill
[        ] Listening to compiler controller...
[   +3 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_listener.99JpDx/listener.dart
[  +23 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +9 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +4 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_compiler.6xEqHX/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +6 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_listener.99JpDx/listener.dart
[ +484 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_listener.99JpDx/listener.dart took 552ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:58768
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_fonts.YWV6Hu
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_listener.99JpDx/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_fonts.YWV6Hu/fonts.conf, SERVER_PORT: 58768, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 60719
[ +292 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: Chat Screen Error Handling verifies overloaded error message format                                                                                                                          00:00 +1: Chat Screen Error Handling verifies overloaded error message format                                                                                                                          00:00 +1: Chat Screen Error Handling verifies network error message format                                                                                                                             00:00 +2: Chat Screen Error Handling verifies network error message format                                                                                                                             00:00 +2: Chat Screen Error Handling verifies authentication error message format                                                                                                                      00:00 +3: Chat Screen Error Handling verifies authentication error message format                                                                                                                      00:00 +3: Chat Screen Error Handling verifies rate limit error message format                                                                                                                          00:00 +4: Chat Screen Error Handling verifies rate limit error message format                                                                                                                          00:00 +4: Chat Screen Error Handling verifies server error message format                                                                                                                              00:00 +5: Chat Screen Error Handling verifies server error message format                                                                                                                              00:00 +5: Chat Screen Error Handling verifies generic error message format                                                                                                                             00:00 +6: Chat Screen Error Handling verifies generic error message format                                                                                                                             [  +96 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +3 ms] test 0: flutter_tester process at pid 60719 exited with code=-9
[        ] test 0: deleting temporary directory
[   +1 ms] test 0: finished
00:00 +6: All tests passed!                                                                                                                                                                            
[   +3 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_compiler.6xEqHX...
[   +1 ms] killing pid 60716
[  +12 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.M2s76X/flutter_test_fonts.YWV6Hu...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:01.079709; combined: 0:00:01.079729.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.552338; combined: 0:00:00.552356.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.398001; combined: 0:00:00.398005.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000400; combined: 0:00:00.000401.
[   +3 ms] "flutter test" took 1,649ms.
[  +19 ms] Running 3 shutdown hooks
[        ] Shutdown hooks complete
[ +152 ms] exiting with code 0
\n-------------------------------------------\n
[  +13 ms] executing: sysctl hw.optional.arm64
[   +8 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[   +9 ms] executing: sw_vers -productName
[  +10 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +9 ms] Exit code 0 from: sw_vers -productVersion
[        ] 15.5
[        ] executing: sw_vers -buildVersion
[  +13 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 24F74
[        ] executing: uname -m
[   +5 ms] Exit code 0 from: uname -m
[        ] arm64
[  +18 ms] Found 1 files which will be executed as Widget Tests.
[   +3 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +27 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +32 ms] Skipping pub get: version match.
[  +22 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +3 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +3 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +2 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[   +1 ms] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +30 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +12 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[   +1 ms] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +13 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +12 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +11 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +9 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[  +10 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +12 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +3 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +22 ms] executing: sysctl hw.optional.arm64
[   +4 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +58 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +53 ms] No packages with native assets. Skipping native assets compilation.
[   +1 ms] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +79 ms] Manifest contained wildcard assets. Inserting missing file into build graph to force rerun. for more information see #56466.
[  +14 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/transcription_service_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/transcription_service_test.dart                                                                                                       [  +99 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/transcription_service_test.dart
[   +2 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_compiler.p0PQ27/output.dill
[        ] Listening to compiler controller...
[   +4 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_listener.KPm0DE/listener.dart
[   +5 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +8 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +4 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_compiler.p0PQ27/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +7 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_listener.KPm0DE/listener.dart
[ +512 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_listener.KPm0DE/listener.dart took 561ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:58773
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_fonts.PcG11t
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_listener.KPm0DE/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_fonts.PcG11t/fonts.conf, SERVER_PORT: 58773, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 60812
[ +279 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: Service Initialization OpenAI service initializes correctly                                                                                                                                  00:00 +1: Service Initialization OpenAI service initializes correctly                                                                                                                                  00:00 +1: Service Initialization Handles missing API key gracefully                                                                                                                                    00:00 +2: Service Initialization Handles missing API key gracefully                                                                                                                                    00:00 +2: Service Initialization Initializes with custom client                                                                                                                                        00:00 +3: Service Initialization Initializes with custom client                                                                                                                                        00:00 +3: Error Handling Transcription handles invalid path gracefully                                                                                                                                 00:00 +4: Error Handling Transcription handles invalid path gracefully                                                                                                                                 00:00 +4: Error Handling Handles API error gracefully                                                                                                                                                  00:00 +5: Error Handling Handles API error gracefully                                                                                                                                                  00:00 +5: Error Handling Handles network errors gracefully                                                                                                                                             00:00 +6: Error Handling Handles network errors gracefully                                                                                                                                             00:00 +6: Error Handling Handles malformed JSON response                                                                                                                                               00:00 +7: Error Handling Handles malformed JSON response                                                                                                                                               00:00 +7: Error Handling Handles empty response body                                                                                                                                                   00:00 +8: Error Handling Handles empty response body                                                                                                                                                   00:00 +8: Successful Transcription Handles successful transcription                                                                                                                                    00:01 +9: Successful Transcription Handles successful transcription                                                                                                                                    00:01 +9: Successful Transcription Handles successful transcription with special characters                                                                                                            00:01 +10: Successful Transcription Handles successful transcription with special characters                                                                                                           00:01 +10: Successful Transcription Handles successful transcription with empty text                                                                                                                   00:01 +11: Successful Transcription Handles successful transcription with empty text                                                                                                                   00:01 +11: Request Validation Sends correct headers and model                                                                                                                                          00:01 +12: Request Validation Sends correct headers and model                                                                                                                                          [ +141 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +3 ms] test 0: flutter_tester process at pid 60812 exited with code=-9
[        ] test 0: deleting temporary directory
[   +1 ms] test 0: finished
00:01 +12: All tests passed!                                                                                                                                                                           
[   +3 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_compiler.p0PQ27...
[   +1 ms] killing pid 60779
[  +12 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.TgjpzK/flutter_test_fonts.PcG11t...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:01.129416; combined: 0:00:01.129434.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.561933; combined: 0:00:00.561952.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.429187; combined: 0:00:00.429189.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000381; combined: 0:00:00.000383.
[   +3 ms] "flutter test" took 1,693ms.
[  +17 ms] Running 3 shutdown hooks
[   +1 ms] Shutdown hooks complete
[ +148 ms] exiting with code 0
\n-------------------------------------------\n
Completed at: Wed Aug 13 22:28:14 -03 2025
