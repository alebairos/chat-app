Test Group 3: Claude Service Tests
=======================================
Started at: Fri May  9 22:19:45 -03 2025

[   +9 ms] executing: sysctl hw.optional.arm64
[   +5 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[   +8 ms] executing: sw_vers -productName
[   +6 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +7 ms] Exit code 0 from: sw_vers -productVersion
[        ] 14.6.1
[        ] executing: sw_vers -buildVersion
[   +7 ms] Exit code 0 from: sw_vers -buildVersion
[   +1 ms] 23G93
[        ] executing: uname -m
[  +15 ms] Exit code 0 from: uname -m
[   +7 ms] arm64
[  +43 ms] Found 1 files which will be executed as Widget Tests.
[   +2 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +28 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +38 ms] Skipping pub get: version match.
[  +17 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +2 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[   +1 ms] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +22 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +10 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +11 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +9 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +8 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +6 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +3 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +1 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +10 ms] executing: sysctl hw.optional.arm64
[   +1 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +41 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +48 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +66 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/claude_service_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/claude_service_test.dart                                                                                                              [  +83 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/claude_service_test.dart
[   +1 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_compiler.HlckJG/output.dill
[        ] Listening to compiler controller...
[   +3 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_listener.dwGSbG/listener.dart
[  +16 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +7 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +3 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_compiler.HlckJG/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +4 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_listener.dwGSbG/listener.dart
[ +439 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_listener.dwGSbG/listener.dart took 489ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:53898
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_fonts.mMbgaT
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_listener.dwGSbG/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_fonts.mMbgaT/fonts.conf, SERVER_PORT: 53898, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 95023
[ +236 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/claude_service_test.dart                                                                                                              

🚀 Starting Claude Service Tests
00:00 +0: (setUpAll)                                                                                                                                                                                   00:00 +0: (setUpAll)                                                                                                                                                                                   

📝 Setting up test environment...
✓ Environment variables loaded
00:00 +0: ClaudeService maintains conversation history                                                                                                                                                 00:00 +0: ClaudeService maintains conversation history                                                                                                                                                 

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing conversation history maintenance...
✓ Mock API response configured
📡 Mock Claude API called
📥 First response received: First response
📊 Conversation history length: 2
✓ Test completed successfully
00:00 +1: ClaudeService maintains conversation history                                                                                                                                                 00:00 +1: ClaudeService clears conversation history                                                                                                                                                    00:00 +1: ClaudeService clears conversation history                                                                                                                                                    

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing conversation history clearing...
✓ Mock API response configured
📡 Mock Claude API called
📊 Initial history length: 2
🧹 History cleared
📊 Final history length: 0
✓ Test completed successfully
00:00 +2: ClaudeService clears conversation history                                                                                                                                                    00:00 +2: ClaudeService handles network errors gracefully                                                                                                                                              00:00 +2: ClaudeService handles network errors gracefully                                                                                                                                              

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing network error handling...
✓ Mock network error configured
📥 Error response received: Unable to get a response from Claude. Please try again later.
📊 Conversation history length: 1
✓ Test completed successfully
00:00 +3: ClaudeService handles network errors gracefully                                                                                                                                              00:00 +3: ClaudeService handles API errors gracefully                                                                                                                                                  00:00 +3: ClaudeService handles API errors gracefully                                                                                                                                                  

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing API error handling...
✓ Mock API error configured
📡 Mock API error response
📥 Error response received: Rate limit exceeded. Please try again later.
📊 Conversation history length: 1
✓ Test completed successfully
00:00 +4: ClaudeService handles API errors gracefully                                                                                                                                                  00:00 +4: ClaudeService handles malformed JSON response gracefully                                                                                                                                     00:00 +4: ClaudeService handles malformed JSON response gracefully                                                                                                                                     

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing malformed JSON handling...
✓ Mock malformed JSON configured
📡 Mock malformed JSON response
📥 Error response received: Unable to get a response from Claude. Please try again later.
✓ Test completed successfully
00:00 +5: ClaudeService handles malformed JSON response gracefully                                                                                                                                     00:00 +5: ClaudeService handles empty response gracefully                                                                                                                                              00:00 +5: ClaudeService handles empty response gracefully                                                                                                                                              

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing empty response handling...
✓ Mock empty response configured
📡 Mock empty response
📥 Error response received: Unable to get a response from Claude. Please try again later.
✓ Test completed successfully
00:00 +6: ClaudeService handles empty response gracefully                                                                                                                                              00:00 +6: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           00:00 +6: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing life plan command processing...
📤 Sending command: {"action":"get_goals_by_dimension","dimension":"SF"}
✓ Mock MCP response configured
📥 Received response: {"status":"success","data":[{"dimension":"SF","id":"G1","description":"Test Goal","trackId":"T1"}]}
🔍 Decoded response: {status: success, data: [{dimension: SF, id: G1, description: Test Goal, trackId: T1}]}
✓ Test completed successfully
00:00 +7: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           00:00 +7: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               00:00 +7: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing MCP failure fallback...
📤 Sending invalid command: {"action":"invalid_command"}
✓ Mock MCP error configured
✓ Mock Claude API response configured
📥 Received response: Missing required parameter: Exception: MCP Error
✓ Test completed successfully
00:00 +8: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               00:00 +8: Life Plan MCP Integration Life Plan MCP Integration processes normal messages without MCP                                                                                                    00:00 +8: Life Plan MCP Integration Life Plan MCP Integration processes normal messages without MCP                                                                                                    

🔄 Setting up test case...
✓ Mock client and MCP initialized
✓ ConfigLoader initialized with mock system prompt
✓ Claude Service initialized

🧪 Testing normal message processing...
📤 Sending message: Hello
✓ Mock Claude API response configured
📡 Mock Claude API called
📥 Claude API response: {"content":[{"text":"Normal response"}]}
📥 Received response: Normal response
✓ Test completed successfully
00:00 +9: Life Plan MCP Integration Life Plan MCP Integration processes normal messages without MCP                                                                                                    00:00 +9: (tearDownAll)                                                                                                                                                                                [ +111 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +1 ms] test 0: flutter_tester process at pid 95023 exited with code=-9
[        ] test 0: deleting temporary directory
[        ] test 0: finished
00:00 +9: All tests passed!                                                                                                                                                                            
[   +2 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_compiler.HlckJG...
[        ] killing pid 95020
[   +5 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.rNmLN9/flutter_test_fonts.mMbgaT...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:00.952834; combined: 0:00:00.952849.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.489757; combined: 0:00:00.489771.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.354629; combined: 0:00:00.354630.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000286; combined: 0:00:00.000287.
[   +2 ms] "flutter test" took 1,440ms.
[  +19 ms] Running 3 shutdown hooks
[        ] Shutdown hooks complete
[ +129 ms] exiting with code 0
\n-------------------------------------------\n
[   +9 ms] executing: sysctl hw.optional.arm64
[   +5 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[   +7 ms] executing: sw_vers -productName
[   +6 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +6 ms] Exit code 0 from: sw_vers -productVersion
[        ] 14.6.1
[        ] executing: sw_vers -buildVersion
[   +5 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 23G93
[        ] executing: uname -m
[   +1 ms] Exit code 0 from: uname -m
[        ] arm64
[   +8 ms] Found 1 files which will be executed as Widget Tests.
[   +2 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +17 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +23 ms] Skipping pub get: version match.
[  +13 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +1 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +20 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +10 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +11 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +9 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +8 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +7 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +3 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +1 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +10 ms] executing: sysctl hw.optional.arm64
[   +1 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +39 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +43 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +61 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/claude_service_error_handling_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/claude_service_error_handling_test.dart                                                                                               [  +79 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/claude_service_error_handling_test.dart
[   +1 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_compiler.uOOoqg/output.dill
[        ] Listening to compiler controller...
[   +4 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_listener.ik0JNl/listener.dart
[   +7 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +9 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +7 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +3 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_compiler.uOOoqg/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +5 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_listener.ik0JNl/listener.dart
[ +384 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_listener.ik0JNl/listener.dart took 436ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:53903
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_fonts.C7PESg
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_listener.ik0JNl/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_fonts.C7PESg/fonts.conf, SERVER_PORT: 53903, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 95066
[ +236 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: Claude Service Error Handling formats overloaded error message correctly                                                                                                                     00:00 +1: Claude Service Error Handling formats overloaded error message correctly                                                                                                                     00:00 +1: Claude Service Error Handling formats rate limit error message correctly                                                                                                                     00:00 +2: Claude Service Error Handling formats rate limit error message correctly                                                                                                                     00:00 +2: Claude Service Error Handling formats authentication error message correctly                                                                                                                 00:00 +3: Claude Service Error Handling formats authentication error message correctly                                                                                                                 00:00 +3: Claude Service Error Handling formats network error message correctly                                                                                                                        00:00 +4: Claude Service Error Handling formats network error message correctly                                                                                                                        00:00 +4: Claude Service Error Handling formats unknown error message correctly                                                                                                                        00:00 +5: Claude Service Error Handling formats unknown error message correctly                                                                                                                        00:00 +5: Claude Service Error Handling handles malformed error JSON gracefully                                                                                                                        00:00 +6: Claude Service Error Handling handles malformed error JSON gracefully                                                                                                                        [  +73 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +1 ms] test 0: flutter_tester process at pid 95066 exited with code=-9
[        ] test 0: deleting temporary directory
[        ] test 0: finished
00:00 +6: All tests passed!                                                                                                                                                                            
[   +2 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_compiler.uOOoqg...
[        ] killing pid 95065
[   +5 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.xh40hU/flutter_test_fonts.C7PESg...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:00.857769; combined: 0:00:00.857785.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.436972; combined: 0:00:00.436986.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.316191; combined: 0:00:00.316192.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000284; combined: 0:00:00.000285.
[   +2 ms] "flutter test" took 1,236ms.
[  +20 ms] Running 3 shutdown hooks
[        ] Shutdown hooks complete
[ +133 ms] exiting with code 0
\n-------------------------------------------\n
[   +9 ms] executing: sysctl hw.optional.arm64
[   +5 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[   +7 ms] executing: sw_vers -productName
[   +6 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +6 ms] Exit code 0 from: sw_vers -productVersion
[        ] 14.6.1
[        ] executing: sw_vers -buildVersion
[   +5 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 23G93
[        ] executing: uname -m
[   +2 ms] Exit code 0 from: uname -m
[        ] arm64
[   +8 ms] Found 1 files which will be executed as Widget Tests.
[   +2 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +1 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +19 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +32 ms] Skipping pub get: version match.
[  +16 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +2 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +20 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +10 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +11 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +9 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +8 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +6 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +3 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +1 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +10 ms] executing: sysctl hw.optional.arm64
[   +1 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +39 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +41 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +62 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_test.dart                                                                                                     [  +81 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_test.dart
[   +1 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[        ] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_compiler.4SYjaq/output.dill
[        ] Listening to compiler controller...
[   +3 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_listener.IBuZhT/listener.dart
[  +18 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +7 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +3 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_compiler.4SYjaq/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +5 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_listener.IBuZhT/listener.dart
[ +404 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_listener.IBuZhT/listener.dart took 457ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:53911
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_fonts.lJgkKD
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_listener.IBuZhT/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_fonts.lJgkKD/fonts.conf, SERVER_PORT: 53911, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 95107
[ +247 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_test.dart                                                                                                     

🚀 Starting Life Plan MCP Integration Tests
00:00 +0: (setUpAll)                                                                                                                                                                                   00:00 +0: (setUpAll)                                                                                                                                                                                   

📝 Setting up test environment...
✓ Environment variables loaded
00:00 +0: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           00:00 +0: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           

🔄 Setting up test case...
✓ Mock client and MCP service initialized
✓ Claude service created with mock dependencies

🧪 Testing life plan command processing...
📤 Sending command: {"action":"get_goals_by_dimension","dimension":"SF"}
✓ Mock MCP response configured
📡 Mock MCP processing command
📥 MCP response: {"status":"success","data":[{"dimension":"SF","id":"G1","description":"Test Goal","trackId":"T1"}]}
📥 Service response received: {"status":"success","data":[{"dimension":"SF","id":"G1","description":"Test Goal","trackId":"T1"}]}
🔍 Decoded response: {status: success, data: [{dimension: SF, id: G1, description: Test Goal, trackId: T1}]}
✓ Test completed successfully
00:00 +1: Life Plan MCP Integration processes life plan commands through MCP                                                                                                                           00:00 +1: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               00:00 +1: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               

🔄 Setting up test case...
✓ Mock client and MCP service initialized
✓ Claude service created with mock dependencies

🧪 Testing MCP failure fallback...
📤 Sending invalid command: {"action":"invalid_command"}
✓ Mock MCP error configured
✓ Mock Claude API response configured
📡 Mock MCP throwing error
📥 Service response received: Missing required parameter: Exception: MCP Error
✓ Test completed successfully
00:00 +2: Life Plan MCP Integration falls back to normal message processing if MCP fails                                                                                                               00:00 +2: Life Plan MCP Integration processes normal messages without MCP                                                                                                                              00:00 +2: Life Plan MCP Integration processes normal messages without MCP                                                                                                                              

🔄 Setting up test case...
✓ Mock client and MCP service initialized
✓ Claude service created with mock dependencies

🧪 Testing normal message processing...
📤 Sending message: Hello
✓ Mock Claude API response configured
📡 Mock Claude API called
📥 Claude API response: {"content":[{"text":"Normal response"}]}
📥 Service response received: Normal response
✓ Test completed successfully
00:00 +3: Life Plan MCP Integration processes normal messages without MCP                                                                                                                              00:00 +3: (tearDownAll)                                                                                                                                                                                [ +102 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +1 ms] test 0: flutter_tester process at pid 95107 exited with code=-9
[        ] test 0: deleting temporary directory
[        ] test 0: finished
00:00 +3: All tests passed!                                                                                                                                                                            
[   +2 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_compiler.4SYjaq...
[   +2 ms] killing pid 95106
[  +18 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.AFwwiZ/flutter_test_fonts.lJgkKD...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:00.934169; combined: 0:00:00.934188.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.457611; combined: 0:00:00.457627.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.357111; combined: 0:00:00.357112.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000295; combined: 0:00:00.000297.
[   +3 ms] "flutter test" took 1,328ms.
[  +19 ms] Running 3 shutdown hooks
[        ] Shutdown hooks complete
[ +134 ms] exiting with code 0
\n-------------------------------------------\n
[  +10 ms] executing: sysctl hw.optional.arm64
[   +5 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[   +7 ms] executing: sw_vers -productName
[   +7 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +7 ms] Exit code 0 from: sw_vers -productVersion
[        ] 14.6.1
[        ] executing: sw_vers -buildVersion
[   +7 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 23G93
[        ] executing: uname -m
[   +2 ms] Exit code 0 from: uname -m
[        ] arm64
[   +8 ms] Found 1 files which will be executed as Widget Tests.
[   +2 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +18 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +24 ms] Skipping pub get: version match.
[  +14 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +1 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +20 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +10 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +3 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +11 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +9 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +8 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +8 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +7 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +3 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +1 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +11 ms] executing: sysctl hw.optional.arm64
[   +2 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +42 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +44 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +63 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_error_handling_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_error_handling_test.dart                                                                                      [  +88 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_error_handling_test.dart
[   +1 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[        ] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_compiler.61VL3X/output.dill
[        ] Listening to compiler controller...
[   +3 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_listener.5F3eM4/listener.dart
[  +19 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +7 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +5 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +6 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +3 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_compiler.61VL3X/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +5 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_listener.5F3eM4/listener.dart
[ +380 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_listener.5F3eM4/listener.dart took 435ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:53916
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_fonts.sMIQ9R
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_listener.5F3eM4/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_fonts.sMIQ9R/fonts.conf, SERVER_PORT: 53916, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 95145
[ +244 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_error_handling_test.dart                                                                                      

🚀 Starting Claude Service Error Handling Tests
00:00 +0: (setUpAll)                                                                                                                                                                                   00:00 +0: (setUpAll)                                                                                                                                                                                   

📝 Setting up test environment...
✓ Environment variables loaded
00:00 +0: Claude Service Error Handling handles overloaded_error gracefully                                                                                                                            00:00 +0: Claude Service Error Handling handles overloaded_error gracefully                                                                                                                            

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing overloaded_error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: {"type":"error","error":{"type":"overloaded_error","message":"Overloaded"}}
📥 Service response received: Rate limit exceeded. Please try again later.
✓ Test completed successfully
00:00 +1: Claude Service Error Handling handles overloaded_error gracefully                                                                                                                            00:00 +1: Claude Service Error Handling handles rate_limit_error gracefully                                                                                                                            00:00 +1: Claude Service Error Handling handles rate_limit_error gracefully                                                                                                                            

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing rate_limit_error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: {"type":"error","error":{"type":"rate_limit_error","message":"Rate limit exceeded"}}
📥 Service response received: Rate limit exceeded. Please try again later.
✓ Test completed successfully
00:00 +2: Claude Service Error Handling handles rate_limit_error gracefully                                                                                                                            00:00 +2: Claude Service Error Handling handles authentication_error gracefully                                                                                                                        00:00 +2: Claude Service Error Handling handles authentication_error gracefully                                                                                                                        

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing authentication_error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: {"type":"error","error":{"type":"authentication_error","message":"Invalid API key"}}
📥 Service response received: Authentication failed. Please check your API key.
✓ Test completed successfully
00:00 +3: Claude Service Error Handling handles authentication_error gracefully                                                                                                                        00:00 +3: Claude Service Error Handling handles network errors gracefully                                                                                                                              00:00 +3: Claude Service Error Handling handles network errors gracefully                                                                                                                              

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing network error handling...
📤 Sending message: Hello
✓ Mock network error configured
📥 Service response received: Unable to connect to Claude. Please check your internet connection.
✓ Test completed successfully
00:00 +4: Claude Service Error Handling handles network errors gracefully                                                                                                                              00:00 +4: Claude Service Error Handling handles server errors gracefully                                                                                                                               00:00 +4: Claude Service Error Handling handles server errors gracefully                                                                                                                               

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing server error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: Internal Server Error
📥 Service response received: Claude service is temporarily unavailable. Please try again later.
✓ Test completed successfully
00:00 +5: Claude Service Error Handling handles server errors gracefully                                                                                                                               00:00 +5: Claude Service Error Handling handles unknown errors gracefully                                                                                                                              00:00 +5: Claude Service Error Handling handles unknown errors gracefully                                                                                                                              

🔄 Setting up test case...
✓ Mock client initialized
✓ Claude service created with mock dependencies

🧪 Testing unknown error handling...
📤 Sending message: Hello
✓ Mock Claude API error response configured
📡 Mock Claude API called
📥 Claude API error response: {"type":"error","error":{"type":"unknown_error","message":"Something went wrong"}}
📥 Service response received: Claude error: Something went wrong
✓ Test completed successfully
00:00 +6: Claude Service Error Handling handles unknown errors gracefully                                                                                                                              00:00 +6: (tearDownAll)                                                                                                                                                                                [  +97 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +2 ms] test 0: flutter_tester process at pid 95145 exited with code=-9
[        ] test 0: deleting temporary directory
[   +1 ms] test 0: finished
00:00 +6: All tests passed!                                                                                                                                                                            
[   +2 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_compiler.61VL3X...
[        ] killing pid 95143
[   +5 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.t1ZT5c/flutter_test_fonts.sMIQ9R...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:00.896802; combined: 0:00:00.896818.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.435657; combined: 0:00:00.435674.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.348892; combined: 0:00:00.348893.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000288; combined: 0:00:00.000289.
[   +2 ms] "flutter test" took 1,296ms.
[  +18 ms] Running 3 shutdown hooks
[        ] Shutdown hooks complete
[ +137 ms] exiting with code 0
\n-------------------------------------------\n
[  +12 ms] executing: sysctl hw.optional.arm64
[   +6 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[   +8 ms] executing: sw_vers -productName
[   +7 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +7 ms] Exit code 0 from: sw_vers -productVersion
[        ] 14.6.1
[        ] executing: sw_vers -buildVersion
[   +7 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 23G93
[        ] executing: uname -m
[   +2 ms] Exit code 0 from: uname -m
[        ] arm64
[   +9 ms] Found 1 files which will be executed as Widget Tests.
[   +3 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +19 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +25 ms] Skipping pub get: version match.
[  +14 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +1 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +35 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +8 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[   +1 ms] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +11 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +9 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +7 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +6 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +3 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +1 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +10 ms] executing: sysctl hw.optional.arm64
[   +1 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +39 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +38 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[   +4 ms] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +63 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_integration_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_integration_test.dart                                                                                         [  +84 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_integration_test.dart
[   +2 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[        ] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_compiler.HlbVWY/output.dill
[        ] Listening to compiler controller...
[   +3 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_listener.Xbo1q3/listener.dart
[  +17 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +7 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +3 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_compiler.HlbVWY/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +5 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_listener.Xbo1q3/listener.dart
[ +406 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_listener.Xbo1q3/listener.dart took 458ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:53921
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_fonts.TkSrth
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_listener.Xbo1q3/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_fonts.TkSrth/fonts.conf, SERVER_PORT: 53921, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 95193
[ +238 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/services/claude_service_integration_test.dart                                                                                         

🚀 Starting Claude Service Integration Tests
00:00 +0: (setUpAll)                                                                                                                                                                                   00:00 +0: (setUpAll)                                                                                                                                                                                   

📝 Setting up test environment...
✓ Environment variables loaded
✓ Life Plan Service initialized
✓ MCP Service initialized
00:00 +0: Claude Service Life Plan Integration successfully retrieves goals by dimension                                                                                                               00:00 +0: Claude Service Life Plan Integration successfully retrieves goals by dimension                                                                                                               

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing goals retrieval by dimension...
📤 Sending command: {"action":"get_goals_by_dimension","dimension":"SF"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"success","data":[{"dimension":"SF","id":"OPP1","description":"Perder peso","trackId":"ME1\r"},{"dimension":"SF","id":"OPP2","description":"Perder peso avançado","trackId":"ME2\r"},{"dimension":"SF","id":"OGM1","description":"Ganhar massa","trackId":"GM1\r"},{"dimension":"SF","id":"OGM2","description":"Ganhar massa avançado","trackId":"GM2\r"},{"dimension":"SF","id":"ODM1","description":"Dormir melhor","trackId":"DM1\r"},{"dimension":"SF","id":"ODM2","description":"Dormir melhor : avançado","trackId":"DM2\r"},{"dimension":"SF","id":"OMMA1","description":"Melhorar minha alimentação","trackId":"ES1\r"},{"dimension":"SF","id":"OMMA2","description":"Melhorar minha alimentação : avançado","trackId":"ES2"}]}
🔍 Decoded response: {status: success, data: [{dimension: SF, id: OPP1, description: Perder peso, trackId: ME1}, {dimension: SF, id: OPP2, description: Perder peso avançado, trackId: ME2}, {dimension: SF, id: OGM1, description: Ganhar massa, trackId: GM1}, {dimension: SF, id: OGM2, description: Ganhar massa avançado, trackId: GM2}, {dimension: SF, id: ODM1, description: Dormir melhor, trackId: DM1}, {dimension: SF, id: ODM2, description: Dormir melhor : avançado, trackId: DM2}, {dimension: SF, id: OMMA1, description: Melhorar minha alimentação, trackId: ES1}, {dimension: SF, id: OMMA2, description: Melhorar minha alimentação : avançado, trackId: ES2}]}
📋 First goal data: {dimension: SF, id: OPP1, description: Perder peso, trackId: ME1}
00:00 +1: Claude Service Life Plan Integration successfully retrieves goals by dimension                                                                                                               00:00 +1: Claude Service Life Plan Integration successfully retrieves track information                                                                                                                00:00 +1: Claude Service Life Plan Integration successfully retrieves track information                                                                                                                

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing track information retrieval...
📤 Sending goals command: {"action":"get_goals_by_dimension","dimension":"SF"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received goals response: {"status":"success","data":[{"dimension":"SF","id":"OPP1","description":"Perder peso","trackId":"ME1\r"},{"dimension":"SF","id":"OPP2","description":"Perder peso avançado","trackId":"ME2\r"},{"dimension":"SF","id":"OGM1","description":"Ganhar massa","trackId":"GM1\r"},{"dimension":"SF","id":"OGM2","description":"Ganhar massa avançado","trackId":"GM2\r"},{"dimension":"SF","id":"ODM1","description":"Dormir melhor","trackId":"DM1\r"},{"dimension":"SF","id":"ODM2","description":"Dormir melhor : avançado","trackId":"DM2\r"},{"dimension":"SF","id":"OMMA1","description":"Melhorar minha alimentação","trackId":"ES1\r"},{"dimension":"SF","id":"OMMA2","description":"Melhorar minha alimentação : avançado","trackId":"ES2"}]}
🔍 Decoded goals data: {status: success, data: [{dimension: SF, id: OPP1, description: Perder peso, trackId: ME1}, {dimension: SF, id: OPP2, description: Perder peso avançado, trackId: ME2}, {dimension: SF, id: OGM1, description: Ganhar massa, trackId: GM1}, {dimension: SF, id: OGM2, description: Ganhar massa avançado, trackId: GM2}, {dimension: SF, id: ODM1, description: Dormir melhor, trackId: DM1}, {dimension: SF, id: ODM2, description: Dormir melhor : avançado, trackId: DM2}, {dimension: SF, id: OMMA1, description: Melhorar minha alimentação, trackId: ES1}, {dimension: SF, id: OMMA2, description: Melhorar minha alimentação : avançado, trackId: ES2}]}
🎯 Found trackId: ME1
📤 Sending track command: {"action":"get_track_by_id","trackId":"ME1\r"}
📥 Received track response: {"status":"success","data":{"dimension":"SF","code":"ME1","name":"Mapa do emagrescimento","challenges":[{"code":"ME1BE","name":"Base do Emagrecimento","level":1,"habits":[{"habitId":"SF7","frequency":7},{"habitId":"SF1","frequency":7}]},{"code":"ME1EC","name":"Emagrecimento consciente","level":2,"habits":[{"habitId":"SF16","frequency":5},{"habitId":"SF1","frequency":7},{"habitId":"SF1813","frequency":2}]}]}}
�� Decoded track data: {status: success, data: {dimension: SF, code: ME1, name: Mapa do emagrescimento, challenges: [{code: ME1BE, name: Base do Emagrecimento, level: 1, habits: [{habitId: SF7, frequency: 7}, {habitId: SF1, frequency: 7}]}, {code: ME1EC, name: Emagrecimento consciente, level: 2, habits: [{habitId: SF16, frequency: 5}, {habitId: SF1, frequency: 7}, {habitId: SF1813, frequency: 2}]}]}}
00:00 +2: Claude Service Life Plan Integration successfully retrieves track information                                                                                                                00:00 +2: Claude Service Life Plan Integration successfully retrieves habits for a challenge                                                                                                           00:00 +2: Claude Service Life Plan Integration successfully retrieves habits for a challenge                                                                                                           

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing habits retrieval for challenge...
📤 Sending command: {"action":"get_habits_for_challenge","trackId":"ME1","challengeCode":"ME1PC"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"success","data":[]}
🔍 Decoded response: {status: success, data: []}
⚠️ No habits found for challenge ME1PC
00:00 +3: Claude Service Life Plan Integration successfully retrieves habits for a challenge                                                                                                           00:00 +3: Claude Service Life Plan Integration successfully retrieves recommended habits                                                                                                               00:00 +3: Claude Service Life Plan Integration successfully retrieves recommended habits                                                                                                               

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing recommended habits retrieval...
📤 Sending command: {"action":"get_recommended_habits","dimension":"SF","minImpact":3}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"success","data":[{"id":"E6","description":"Agradecer 3 coisas do meu dia ","intensity":"","duration":"","impact":{"relationships":3,"work":3,"physical":3,"spiritual":5,"mental":5}},{"id":"SF5","description":"Dormir de 7 a 9 horas ","intensity":"","duration":"","impact":{"relationships":0,"work":1,"physical":5,"spiritual":0,"mental":3}},{"id":"SF6","description":"Evitar o consumo de cafeína após as 15:00","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":2}},{"id":"SF8","description":"Comer fruta ","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":1}},{"id":"SF9","description":"Comer fonte de carboidrato complexo ","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":1}},{"id":"SF10","description":"Comer proteína nas refeições (ingestão adequade de proteína) ","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":1}},{"id":"SF11","description":"Comer legumes e salada","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":3,"spiritual":0,"mental":1}},{"id":"SF1213","description":"Fazer exercício de força ","intensity":"Leve","duration":"Mais de 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1222","description":"Fazer exercício de força ","intensity":"Moderada","duration":"De 21 a 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1223","description":"Fazer exercício de força ","intensity":"Moderada","duration":"Mais de 40 min","impact":{"relationships":0,"work":3,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1231","description":"Fazer exercício de força ","intensity":"Intensa","duration":"Até 20 min","impact":{"relationships":0,"work":1,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1232","description":"Fazer exercício de força ","intensity":"Intensa","duration":"De 21 a 40 min","impact":{"relationships":0,"work":3,"physical":4,"spiritual":0,"mental":4}},{"id":"SF1233","description":"Fazer exercício de força ","intensity":"Intensa","duration":"Mais de 40 min","impact":{"relationships":0,"work":5,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1313","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Leve","duration":"Mais de 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1322","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Moderada","duration":"De 21 a 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1323","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Moderada","duration":"Mais de 40 min","impact":{"relationships":0,"work":3,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1331","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Intensa","duration":"Até 20 min","impact":{"relationships":0,"work":1,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1332","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Intensa","duration":"De 21 a 40 min","impact":{"relationships":0,"work":3,"physical":4,"spiritual":0,"mental":4}},{"id":"SF1333","description":"Fazer exercício de cardio/aeróbico  ","intensity":"Intensa","duration":"Mais de 40 min","impact":{"relationships":0,"work":5,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1413","description":"Correr","intensity":"Leve","duration":"Mais de 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1422","description":"Correr","intensity":"Moderada","duration":"De 21 a 40 min","impact":{"relationships":0,"work":2,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1423","description":"Correr","intensity":"Moderada","duration":"Mais de 40 min","impact":{"relationships":0,"work":3,"physical":5,"spiritual":0,"mental":5}},{"id":"SF1431","description":"Correr","intensity":"Intensa","duration":"Até 20 min","impact":{"relationships":0,"work":1,"physical":3,"spiritual":0,"mental":3}},{"id":"SF1432","description":"Correr","intensity":"Intensa","duration":"De 21 a 40 min","impact":{"relationships":0,"work":3,"physical":4,"spiritual":0,"mental":4}},{"id":"SF1433","description":"Correr","intensity":"Intensa","duration":"Mais de 40 min","impact":{"relationships":0,"work":5,"physical":5,"spiritual":0,"mental":5}},{"id":"SF15","description":"Alongar","intensity":"","duration":"Mais de 40 min ","impact":{"relationships":0,"work":0,"physical":5,"spiritual":0,"mental":3}},{"id":"SF16","description":"Dormir sempre no mesmo horário (consistência no horário de dormir e acordar)","intensity":"","duration":"","impact":{"relationships":0,"work":1,"physical":5,"spiritual":0,"mental":3}},{"id":"SF17","description":"Restringir comida industrializada/processada","intensity":"","duration":"","impact":{"relationships":0,"work":0,"physical":5,"spiritual":0,"mental":3}},{"id":"SF1813","description":"Caminhar ","intensity":"Leve","duration":"Mais de 20 min ","impact":{"relationships":0,"work":2,"physical":3,"spiritual":1,"mental":3}},{"id":"SF1822","description":"Caminhar ","intensity":"Moderado","duration":"De 11 a 20 min ","impact":{"relationships":0,"work":2,"physical":3,"spiritual":1,"mental":3}},{"id":"SF1822","description":"Caminhar ","intensity":"Moderado","duration":"Mais de 20 min ","impact":{"relationships":0,"work":3,"physical":5,"spiritual":1,"mental":5}},{"id":"SM1","description":"Me expor à luz natural ","intensity":"","duration":"Mais de 20 min ","impact":{"relationships":0,"work":2,"physical":4,"spiritual":0,"mental":5}},{"id":"SM813","description":"Caminhar ao ar livre","intensity":"Leve","duration":"Mais de 20 min ","impact":{"relationships":0,"work":2,"physical":3,"spiritual":1,"mental":3}},{"id":"SM822","description":"Caminhar ao ar livre","intensity":"Moderado","duration":"De 11 a 20 min ","impact":{"relationships":0,"work":2,"physical":3,"spiritual":1,"mental":3}},{"id":"SM823","description":"Caminhar ao ar livre","intensity":"Moderado","duration":"Mais de 20 min ","impact":{"relationships":0,"work":3,"physical":5,"spiritual":1,"mental":5}}]}
🔍 Decoded response: {status: success, data: [{id: E6, description: Agradecer 3 coisas do meu dia , intensity: , duration: , impact: {relationships: 3, work: 3, physical: 3, spiritual: 5, mental: 5}}, {id: SF5, description: Dormir de 7 a 9 horas , intensity: , duration: , impact: {relationships: 0, work: 1, physical: 5, spiritual: 0, mental: 3}}, {id: SF6, description: Evitar o consumo de cafeína após as 15:00, intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 2}}, {id: SF8, description: Comer fruta , intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 1}}, {id: SF9, description: Comer fonte de carboidrato complexo , intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 1}}, {id: SF10, description: Comer proteína nas refeições (ingestão adequade de proteína) , intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 1}}, {id: SF11, description: Comer legumes e salada, intensity: , duration: , impact: {relationships: 0, work: 0, physical: 3, spiritual: 0, mental: 1}}, {id: SF1213, description: Fazer exercício de força , intensity: Leve, duration: Mais de 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1222, description: Fazer exercício de força , intensity: Moderada, duration: De 21 a 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1223, description: Fazer exercício de força , intensity: Moderada, duration: Mais de 40 min, impact: {relationships: 0, work: 3, physical: 5, spiritual: 0, mental: 5}}, {id: SF1231, description: Fazer exercício de força , intensity: Intensa, duration: Até 20 min, impact: {relationships: 0, work: 1, physical: 3, spiritual: 0, mental: 3}}, {id: SF1232, description: Fazer exercício de força , intensity: Intensa, duration: De 21 a 40 min, impact: {relationships: 0, work: 3, physical: 4, spiritual: 0, mental: 4}}, {id: SF1233, description: Fazer exercício de força , intensity: Intensa, duration: Mais de 40 min, impact: {relationships: 0, work: 5, physical: 5, spiritual: 0, mental: 5}}, {id: SF1313, description: Fazer exercício de cardio/aeróbico  , intensity: Leve, duration: Mais de 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1322, description: Fazer exercício de cardio/aeróbico  , intensity: Moderada, duration: De 21 a 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1323, description: Fazer exercício de cardio/aeróbico  , intensity: Moderada, duration: Mais de 40 min, impact: {relationships: 0, work: 3, physical: 5, spiritual: 0, mental: 5}}, {id: SF1331, description: Fazer exercício de cardio/aeróbico  , intensity: Intensa, duration: Até 20 min, impact: {relationships: 0, work: 1, physical: 3, spiritual: 0, mental: 3}}, {id: SF1332, description: Fazer exercício de cardio/aeróbico  , intensity: Intensa, duration: De 21 a 40 min, impact: {relationships: 0, work: 3, physical: 4, spiritual: 0, mental: 4}}, {id: SF1333, description: Fazer exercício de cardio/aeróbico  , intensity: Intensa, duration: Mais de 40 min, impact: {relationships: 0, work: 5, physical: 5, spiritual: 0, mental: 5}}, {id: SF1413, description: Correr, intensity: Leve, duration: Mais de 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1422, description: Correr, intensity: Moderada, duration: De 21 a 40 min, impact: {relationships: 0, work: 2, physical: 3, spiritual: 0, mental: 3}}, {id: SF1423, description: Correr, intensity: Moderada, duration: Mais de 40 min, impact: {relationships: 0, work: 3, physical: 5, spiritual: 0, mental: 5}}, {id: SF1431, description: Correr, intensity: Intensa, duration: Até 20 min, impact: {relationships: 0, work: 1, physical: 3, spiritual: 0, mental: 3}}, {id: SF1432, description: Correr, intensity: Intensa, duration: De 21 a 40 min, impact: {relationships: 0, work: 3, physical: 4, spiritual: 0, mental: 4}}, {id: SF1433, description: Correr, intensity: Intensa, duration: Mais de 40 min, impact: {relationships: 0, work: 5, physical: 5, spiritual: 0, mental: 5}}, {id: SF15, description: Alongar, intensity: , duration: Mais de 40 min , impact: {relationships: 0, work: 0, physical: 5, spiritual: 0, mental: 3}}, {id: SF16, description: Dormir sempre no mesmo horário (consistência no horário de dormir e acordar), intensity: , duration: , impact: {relationships: 0, work: 1, physical: 5, spiritual: 0, mental: 3}}, {id: SF17, description: Restringir comida industrializada/processada, intensity: , duration: , impact: {relationships: 0, work: 0, physical: 5, spiritual: 0, mental: 3}}, {id: SF1813, description: Caminhar , intensity: Leve, duration: Mais de 20 min , impact: {relationships: 0, work: 2, physical: 3, spiritual: 1, mental: 3}}, {id: SF1822, description: Caminhar , intensity: Moderado, duration: De 11 a 20 min , impact: {relationships: 0, work: 2, physical: 3, spiritual: 1, mental: 3}}, {id: SF1822, description: Caminhar , intensity: Moderado, duration: Mais de 20 min , impact: {relationships: 0, work: 3, physical: 5, spiritual: 1, mental: 5}}, {id: SM1, description: Me expor à luz natural , intensity: , duration: Mais de 20 min , impact: {relationships: 0, work: 2, physical: 4, spiritual: 0, mental: 5}}, {id: SM813, description: Caminhar ao ar livre, intensity: Leve, duration: Mais de 20 min , impact: {relationships: 0, work: 2, physical: 3, spiritual: 1, mental: 3}}, {id: SM822, description: Caminhar ao ar livre, intensity: Moderado, duration: De 11 a 20 min , impact: {relationships: 0, work: 2, physical: 3, spiritual: 1, mental: 3}}, {id: SM823, description: Caminhar ao ar livre, intensity: Moderado, duration: Mais de 20 min , impact: {relationships: 0, work: 3, physical: 5, spiritual: 1, mental: 5}}]}
📋 First recommended habit: {id: E6, description: Agradecer 3 coisas do meu dia , intensity: , duration: , impact: {relationships: 3, work: 3, physical: 3, spiritual: 5, mental: 5}}
💪 Physical impact: 3
00:00 +4: Claude Service Life Plan Integration successfully retrieves recommended habits                                                                                                               00:00 +4: Claude Service Life Plan Integration handles invalid commands gracefully                                                                                                                     00:00 +4: Claude Service Life Plan Integration handles invalid commands gracefully                                                                                                                     

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing invalid command handling...
📤 Sending invalid command: {"action":"invalid_action","data":"test"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"error","message":"Unknown action: invalid_action"}
🔍 Decoded error response: {status: error, message: Unknown action: invalid_action}
00:00 +5: Claude Service Life Plan Integration handles invalid commands gracefully                                                                                                                     00:00 +5: Claude Service Life Plan Integration handles missing required parameters gracefully                                                                                                          00:00 +5: Claude Service Life Plan Integration handles missing required parameters gracefully                                                                                                          

🔄 Setting up test case...
✓ Mock client configured with default response
🔧 Initializing MockConfigLoader
✓ MockConfigLoader initialized
✓ Claude Service initialized with mock dependencies

🧪 Testing missing parameter handling...
📤 Sending command with missing parameter: {"action":"get_goals_by_dimension"}
📜 Loading mock system prompt
📋 Mock prompt content: {"system_prompt":{"role":"system","content":"You are Sergeant Oracle, a test assistant. You have access to life planning data through these commands:\n- get_goals_by_dimension\n- get_track_by_id\n- get_habits_for_challenge\n- get_recommended_habits"}}
📥 Received response: {"status":"error","message":"Exception: Missing required parameter: dimension"}
🔍 Decoded error response: {status: error, message: Exception: Missing required parameter: dimension}
00:00 +6: Claude Service Life Plan Integration handles missing required parameters gracefully                                                                                                          00:00 +6: (tearDownAll)                                                                                                                                                                                [ +120 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +1 ms] test 0: flutter_tester process at pid 95193 exited with code=-9
[        ] test 0: deleting temporary directory
[        ] test 0: finished
00:00 +6: All tests passed!                                                                                                                                                                            
[   +2 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_compiler.HlbVWY...
[        ] killing pid 95192
[   +5 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.47pgDu/flutter_test_fonts.TkSrth...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:00.932953; combined: 0:00:00.932968.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.458205; combined: 0:00:00.458219.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.366615; combined: 0:00:00.366616.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000303; combined: 0:00:00.000303.
[   +3 ms] "flutter test" took 1,338ms.
[  +19 ms] Running 3 shutdown hooks
[        ] Shutdown hooks complete
[ +132 ms] exiting with code 0
\n-------------------------------------------\n
[  +10 ms] executing: sysctl hw.optional.arm64
[   +5 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[   +7 ms] executing: sw_vers -productName
[   +6 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +6 ms] Exit code 0 from: sw_vers -productVersion
[        ] 14.6.1
[        ] executing: sw_vers -buildVersion
[   +5 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 23G93
[        ] executing: uname -m
[   +2 ms] Exit code 0 from: uname -m
[        ] arm64
[   +8 ms] Found 1 files which will be executed as Widget Tests.
[   +2 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +17 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +24 ms] Skipping pub get: version match.
[  +13 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +1 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +20 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +10 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +11 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +8 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +8 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +6 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +3 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +6 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +1 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +10 ms] executing: sysctl hw.optional.arm64
[   +1 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +39 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +44 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[        ] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +68 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/chat_screen_error_handling_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/chat_screen_error_handling_test.dart                                                                                                  [  +74 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/chat_screen_error_handling_test.dart
[   +1 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[   +1 ms] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_compiler.siwXfN/output.dill
[        ] Listening to compiler controller...
[   +3 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_listener.N2BmZS/listener.dart
[  +13 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +7 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +8 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +3 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_compiler.siwXfN/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +5 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_listener.N2BmZS/listener.dart
[ +389 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_listener.N2BmZS/listener.dart took 439ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:53930
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_fonts.SvnjNn
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_listener.N2BmZS/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_fonts.SvnjNn/fonts.conf, SERVER_PORT: 53930, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 95234
[ +240 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: Chat Screen Error Handling verifies overloaded error message format                                                                                                                          00:00 +1: Chat Screen Error Handling verifies overloaded error message format                                                                                                                          00:00 +1: Chat Screen Error Handling verifies network error message format                                                                                                                             00:00 +2: Chat Screen Error Handling verifies network error message format                                                                                                                             00:00 +2: Chat Screen Error Handling verifies authentication error message format                                                                                                                      00:00 +3: Chat Screen Error Handling verifies authentication error message format                                                                                                                      00:00 +3: Chat Screen Error Handling verifies rate limit error message format                                                                                                                          00:00 +4: Chat Screen Error Handling verifies rate limit error message format                                                                                                                          00:00 +4: Chat Screen Error Handling verifies server error message format                                                                                                                              00:00 +5: Chat Screen Error Handling verifies server error message format                                                                                                                              00:00 +5: Chat Screen Error Handling verifies generic error message format                                                                                                                             00:00 +6: Chat Screen Error Handling verifies generic error message format                                                                                                                             [  +78 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +2 ms] test 0: flutter_tester process at pid 95234 exited with code=-9
[        ] test 0: deleting temporary directory
[   +1 ms] test 0: finished
00:00 +6: All tests passed!                                                                                                                                                                            
[   +2 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_compiler.siwXfN...
[        ] killing pid 95233
[   +5 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.CiIYSt/flutter_test_fonts.SvnjNn...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:00.863965; combined: 0:00:00.863983.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.439514; combined: 0:00:00.439533.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.325422; combined: 0:00:00.325424.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000374; combined: 0:00:00.000376.
[   +3 ms] "flutter test" took 1,252ms.
[  +19 ms] Running 3 shutdown hooks
[        ] Shutdown hooks complete
[ +134 ms] exiting with code 0
\n-------------------------------------------\n
[   +9 ms] executing: sysctl hw.optional.arm64
[   +5 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[   +7 ms] executing: sw_vers -productName
[   +6 ms] Exit code 0 from: sw_vers -productName
[        ] macOS
[        ] executing: sw_vers -productVersion
[   +5 ms] Exit code 0 from: sw_vers -productVersion
[        ] 14.6.1
[        ] executing: sw_vers -buildVersion
[   +5 ms] Exit code 0 from: sw_vers -buildVersion
[        ] 23G93
[        ] executing: uname -m
[   +2 ms] Exit code 0 from: uname -m
[        ] arm64
[   +8 ms] Found 1 files which will be executed as Widget Tests.
[   +2 ms] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[   +2 ms] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[  +17 ms] Artifact Instance of 'MaterialFonts' is not required, skipping update.
[        ] Artifact Instance of 'GradleWrapper' is not required, skipping update.
[        ] Artifact Instance of 'AndroidGenSnapshotArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'AndroidInternalBuildArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterWebSdk' is not required, skipping update.
[        ] Artifact Instance of 'LegacyCanvasKitRemover' is not required, skipping update.
[        ] Artifact Instance of 'FlutterSdk' is not required, skipping update.
[        ] Artifact Instance of 'WindowsEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxEngineArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'LinuxFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'MacOSFuchsiaSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerSDKArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FlutterRunnerDebugSymbols' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'IosUsbArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'FontSubsetArtifacts' is not required, skipping update.
[        ] Artifact Instance of 'PubDependencies' is not required, skipping update.
[  +23 ms] Skipping pub get: version match.
[  +13 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[   +1 ms] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[   +1 ms] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[   +1 ms] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[   +1 ms] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[  +20 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[  +10 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[   +1 ms] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +2 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[  +11 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +9 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +9 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +4 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +8 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +6 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +3 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +7 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +1 ms] Generating /Users/alebairos/Projects/mobile/chat_app/android/app/src/main/java/io/flutter/plugins/GeneratedPluginRegistrant.java
[  +10 ms] executing: sysctl hw.optional.arm64
[   +1 ms] Exit code 0 from: sysctl hw.optional.arm64
[        ] hw.optional.arm64: 1
[        ] executing: /usr/bin/arch -arm64e xcrun xcodebuild -version
[  +39 ms] Exit code 0 from: /usr/bin/arch -arm64e xcrun xcodebuild -version
[        ] Xcode 16.2
           Build version 16C5032a
[  +38 ms] No packages with native assets. Skipping native assets compilation.
[        ] Writing native assets json to file:///Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json.
[   +4 ms] Writing /Users/alebairos/Projects/mobile/chat_app/build/native_assets/macos/native_assets.json done.
[  +62 ms] running test package with arguments: [--no-color, --chain-stack-traces, --, file:///Users/alebairos/Projects/mobile/chat_app/test/transcription_service_test.dart?]
00:00 +0: loading /Users/alebairos/Projects/mobile/chat_app/test/transcription_service_test.dart                                                                                                       [  +78 ms] test 0: starting test /Users/alebairos/Projects/mobile/chat_app/test/transcription_service_test.dart
[   +1 ms] Stopping scan for flutter_test_config.dart; found project root at /Users/alebairos/Projects/mobile/chat_app
[        ] Compiler will use the following file as its incremental dill file: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_compiler.grWXbL/output.dill
[        ] Listening to compiler controller...
[   +3 ms] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_listener.nbDj3D/listener.dart
[  +17 ms] Found plugin audioplayers at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers-5.2.1/
[        ] Found plugin audioplayers_android at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_android-4.0.3/
[        ] Found plugin audioplayers_darwin at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_darwin-5.0.2/
[        ] Found plugin audioplayers_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_linux-3.1.0/
[        ] Found plugin audioplayers_web at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_web-4.1.0/
[        ] Found plugin audioplayers_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/audioplayers_windows-3.1.0/
[   +7 ms] Found plugin isar_flutter_libs at /Users/alebairos/.pub-cache/hosted/pub.dev/isar_flutter_libs-3.1.0+1/
[   +3 ms] Found plugin path_provider at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider-2.1.5/
[        ] Found plugin path_provider_android at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_android-2.2.15/
[        ] Found plugin path_provider_foundation at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_foundation-2.4.1/
[        ] Found plugin path_provider_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_linux-2.2.1/
[        ] Found plugin path_provider_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/path_provider_windows-2.3.0/
[   +1 ms] Found plugin record at /Users/alebairos/.pub-cache/hosted/pub.dev/record-4.4.4/
[        ] Found plugin record_linux at /Users/alebairos/.pub-cache/hosted/pub.dev/record_linux-0.4.1/
[        ] Found plugin record_macos at /Users/alebairos/.pub-cache/hosted/pub.dev/record_macos-0.2.2/
[        ] Found plugin record_web at /Users/alebairos/.pub-cache/hosted/pub.dev/record_web-0.5.0/
[        ] Found plugin record_windows at /Users/alebairos/.pub-cache/hosted/pub.dev/record_windows-0.7.1/
[   +6 ms] Found plugin integration_test at /opt/homebrew/Caskroom/flutter/3.27.2/flutter/packages/integration_test/
[   +3 ms] /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/dartaotruntime /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/dart-sdk/bin/snapshots/frontend_server_aot.dart.snapshot --sdk-root /opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/common/flutter_patched_sdk/ --incremental --no-print-incremental-dependencies --target=flutter --experimental-emit-debug-metadata --output-dill /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_compiler.grWXbL/output.dill --packages /Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json -Ddart.vm.profile=false -Ddart.vm.product=false --enable-asserts --track-widget-creation --initialize-from-dill /Users/alebairos/Projects/mobile/chat_app/build/test_cache/build/cache.dill.track.dill --verbosity=error
[   +4 ms] <- compile file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_listener.nbDj3D/listener.dart
[ +393 ms] <- accept
[        ] <- reset
[        ] Compiling file:///var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_listener.nbDj3D/listener.dart took 443ms
[        ] test 0: starting test device
[   +1 ms] test 0: awaiting connection to test device
[        ] test 0: VM Service uri is not available
[   +1 ms] test 0: test harness socket server is running at port:53935
[        ] Using this directory for fonts configuration: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_fonts.fFbIRC
[        ] test 0: Starting flutter_tester process with command=[/opt/homebrew/Caskroom/flutter/3.27.2/flutter/bin/cache/artifacts/engine/darwin-x64/flutter_tester, --disable-vm-service, --enable-checked-mode, --verify-entry-points, --enable-software-rendering, --skia-deterministic-rendering, --enable-dart-profiling, --non-interactive, --use-test-fonts, --disable-asset-fonts, --packages=/Users/alebairos/Projects/mobile/chat_app/.dart_tool/package_config.json, --flutter-assets-dir=/Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets, /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_listener.nbDj3D/listener.dart.dill], environment={FLUTTER_TEST: true, FONTCONFIG_FILE: /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_fonts.fFbIRC/fonts.conf, SERVER_PORT: 53935, APP_NAME: character_ai_clone, UNIT_TEST_ASSETS: /Users/alebairos/Projects/mobile/chat_app/build/unit_test_assets}
[   +3 ms] test 0: Started flutter_tester process at pid 95271
[ +251 ms] test 0: connected to test device, now awaiting test result
[        ] test 0: Waiting for test harness or tests to finish
00:00 +0: Service Initialization OpenAI service initializes correctly                                                                                                                                  00:00 +1: Service Initialization OpenAI service initializes correctly                                                                                                                                  00:00 +1: Service Initialization Handles missing API key gracefully                                                                                                                                    00:00 +2: Service Initialization Handles missing API key gracefully                                                                                                                                    00:00 +2: Service Initialization Initializes with custom client                                                                                                                                        00:00 +3: Service Initialization Initializes with custom client                                                                                                                                        00:00 +3: Error Handling Transcription handles invalid path gracefully                                                                                                                                 00:00 +4: Error Handling Transcription handles invalid path gracefully                                                                                                                                 00:00 +4: Error Handling Handles API error gracefully                                                                                                                                                  00:00 +5: Error Handling Handles API error gracefully                                                                                                                                                  00:00 +5: Error Handling Handles network errors gracefully                                                                                                                                             00:00 +6: Error Handling Handles network errors gracefully                                                                                                                                             00:00 +6: Error Handling Handles malformed JSON response                                                                                                                                               00:00 +7: Error Handling Handles malformed JSON response                                                                                                                                               00:00 +7: Error Handling Handles empty response body                                                                                                                                                   00:00 +8: Error Handling Handles empty response body                                                                                                                                                   00:00 +8: Successful Transcription Handles successful transcription                                                                                                                                    00:00 +9: Successful Transcription Handles successful transcription                                                                                                                                    00:00 +9: Successful Transcription Handles successful transcription with special characters                                                                                                            00:00 +10: Successful Transcription Handles successful transcription with special characters                                                                                                           00:00 +10: Successful Transcription Handles successful transcription with empty text                                                                                                                   00:00 +11: Successful Transcription Handles successful transcription with empty text                                                                                                                   00:00 +11: Request Validation Sends correct headers and model                                                                                                                                          00:00 +12: Request Validation Sends correct headers and model                                                                                                                                          [ +122 ms] test 0: Test harness is no longer needed by test process
[        ] test 0: finished
[        ] test 0: cleaning up...
[        ] test 0: ensuring test device is terminated.
[        ] test 0: Terminating flutter_tester process
[        ] test 0: Shutting down DevTools server
[        ] test 0: Test process is no longer needed by test harness
[        ] test 0: Shutting down test harness socket server
[   +1 ms] test 0: flutter_tester process at pid 95271 exited with code=-9
[        ] test 0: deleting temporary directory
[        ] test 0: finished
00:00 +12: All tests passed!                                                                                                                                                                           
[   +2 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_compiler.grWXbL...
[        ] killing pid 95270
[   +5 ms] Deleting /var/folders/f7/rqd14g9d2rv0v4rhwj55l7v40000gn/T/flutter_tools.3TMxbh/flutter_test_fonts.fFbIRC...
[   +1 ms] test package returned with exit code 0
[        ] Runtime for phase TestRunner: Wall-clock: 0:00:00.928086; combined: 0:00:00.928100.
[        ] Runtime for phase Compile: Wall-clock: 0:00:00.443977; combined: 0:00:00.443991.
[        ] Runtime for phase Run: Wall-clock: 0:00:00.380690; combined: 0:00:00.380691.
[        ] Runtime for phase CoverageTotal: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageParseJson: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageAddHitmap: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase CoverageDataCollect: Wall-clock: 0:00:00.000000; combined: 0:00:00.000000.
[        ] Runtime for phase WatcherFinishedTest: Wall-clock: 0:00:00.000330; combined: 0:00:00.000331.
[   +2 ms] "flutter test" took 1,307ms.
[  +21 ms] Running 3 shutdown hooks
[        ] Shutdown hooks complete
[ +128 ms] exiting with code 0
\n-------------------------------------------\n
Completed at: Fri May  9 22:19:56 -03 2025
